<?xml version="1.0" encoding="utf-8"?>
<html lang="fr">
  <head>
    <title>Exemple</title>
    <meta name="teaching-assistant-code-style" content="dracula"/>
    <meta name="teaching-assistant-generator" content="moodle-player"/>
    <!--        uncomment to add slide-->
    <!--        <meta name="teaching-assistant-generator" content="moodle-slides"/>-->
    <meta name="teaching-assistant-menu-level" content="3"/>
    <meta name="teaching-assistant-version" content="2.8.0"/>
    <meta name="teaching-assistant-course-datetime" content="2023-01-31 16:19:37"/>
  </head>
  <body>
    <section>
      <h1>Installation</h1>
      <article>
        <h2>Android Studio</h2>
        <p>
          T√©l√©charger directement depuis le site d'Android d√©veloppeur
                    
          <a href="https://developer.android.com/studio">Android Studio</a>
        </p>
        <p>
          Si vous avez besoin de plus d'information pour d'autre Syst√®me d'exploitation
                    
          <a href="https://developer.android.com/studio/install">Guide Installation</a>
        </p>
      </article>
      <article>
        <h2>Installation de l'√©mulateur</h2>
        <p>Pour pouvoir tester l'application, on va devoir installer un √©mulateur. Dans Android Studio il y a
                    d√©j√† une solution de pr√©sente pour cela
                </p>
        <ul>
          <li>
            Cr√©er un device virtuel
                        
            <a href="https://developer.android.com/studio/run/managing-avds">Virtual
                            Device
                        </a>
          </li>
          <li>
            Utiliser un outil externe
                        
            <ul>
              <li>
                <a href="https://www.memuplay.com/">Menu Play</a>
              </li>
              <li>
                <a href="https://www.bluestacks.com/fr/index.html">Blue Stack</a>
                
                                PC et Mac seulement
                            
              </li>
            </ul>
          </li>
        </ul>
      </article>
      <article>
        <h2>Configurer le T√©l√©phone</h2>
        <p>
          Lors de la cr√©ation d'une application Android, il est important de toujours tester votre application
                    sur un appareil r√©el avant de la diffuser aux utilisateurs. Pour pouvoir d√©ployer votre application
                    sur un t√©l√©phone vous allez devoir suivre plusieurs √©tapes.
                    
          <a href="https://developer.android.com/studio/run/device">DOC</a>
        </p>
        <ul>
          <li>
            Activer le mode d√©veloppeur
                        
            <a href="https://developer.android.com/studio/debug/dev-options">DOC</a>
          </li>
          <li>Activer le d√©veloppeur option</li>
          <li>Activer le d√©bogage USB</li>
        </ul>
      </article>
      <article>
        <h2>Documentation</h2>
        <p>
          Android √©volue vite, il faut constamment aller voir sur la documentation officiel les changements.
                    
          <a href="https://developer.android.com/docs">Documentation Officiel</a>
        </p>
        <p>La documentation est subdivis√©e en plusieurs parties :</p>
        <img class="img-fluid rounded" src="../asset/documentation.png" alt="Description alternative"/>
        <ul>
          <li>
            <a href="https://developer.android.com/guide">Le guide</a>
            
                        comme un tutoriel avec des examples de comment √ßa fonctionne.
                    
          </li>
          <li>
            <a href="https://developer.android.com/reference">La R√©f√©rence</a>
            
                        le manuel pour chaque classe d'Android avec la liste et la description des constructeurs, des
                        m√©thodes et des attributs
                    
          </li>
          <li>
            Un guide pour les interfaces
                        
            <ul>
              <li>
                <a href="https://developer.android.com/develop/ui">UI guide</a>
              </li>
              <li>
                <a href="https://developer.android.com/design">Design guide</a>
              </li>
            </ul>
          </li>
        </ul>
      </article>
      <article>
        <h2>Miroir</h2>
        <p>Une fonctionnalit√© int√©ressante lors d'une pr√©sentation est de pouvoir faire le miroir du t√©l√©phone
                    et l'afficher sur un √©cran. Voici deux applications qui le font:
                </p>
        <ul>
          <li>
            
                        L'extension de chrome
                        
            <a href="https://chrome.google.com/webstore/detail/vysor/gidgenkbbabolejbgbpnhbimgjbffefm">
                            Vysor
                        </a>
            
                        permet de rapidement faire un miroir du t√©l√©phone
                    
          </li>
          <li>
            <a href="https://github.com/Genymobile/scrcpy">Screen Copy</a>
            
                        projet open-source avec pleins d'options int√©ressantes, mais un peu plus de configuration √†
                        faire.
                    
          </li>
        </ul>
      </article>
    </section>
    <section>
      <h1>Introduction</h1>
      <article>
        <h2>
          Architecture Syst√®me Android
            
          <a href="https://developer.android.com/guide/platform">DOC</a>
        </h2>
        <p>Android est un syst√®me open source bas√© sur un noyau Linux cr√©er pour un large √©ventail d'appareils</p>
        <ul>
          <li>Appareils tactiles : Smartphone, tablette, montre</li>
          <li>Autre : T√©l√©viseur, autoradio, voiture ...</li>
        </ul>
        <img class="img-fluid rounded" src="../asset/android_architecture.png" alt="Description alternative"/>
      </article>
      <article>
        <h3>Le noyaux linux</h3>
        <p>La base de la plate-forme Android est le noyau Linux. Par exemple, Android Runtime (ART) s'appuie sur le
            noyau Linux pour les fonctionnalit√©s sous-jacentes telles que le threading et la gestion de la m√©moire de
            bas niveau.
        </p>
        <p>L'utilisation d'un noyau Linux permet √† Android de tirer parti des principales fonctionnalit√©s de s√©curit√© et
            permet aux fabricants d'appareils de d√©velopper des pilotes mat√©riels pour un noyau bien connu.
        </p>
      </article>
      <article>
        <h3>Couche d'abstraction mat√©rielle (HAL)</h3>
        <p>La couche d'abstraction mat√©rielle (HAL) fournit des interfaces standard qui exposent les capacit√©s
            mat√©rielles de l'appareil au cadre d'API Java de niveau sup√©rieur. Le HAL se compose de plusieurs modules de
            biblioth√®que, chacun impl√©mentant une interface pour un type sp√©cifique de composant mat√©riel, tel que la
            cam√©ra ou le module Bluetooth. Lorsqu'une API d'infrastructure effectue un appel pour acc√©der au mat√©riel de
            l'appareil, le syst√®me Android charge le module de biblioth√®que pour ce composant mat√©riel.
        </p>
      </article>
      <article>
        <h3>Android Runtime</h3>
        <p>Pour les appareils ex√©cutant Android version 5.0 (niveau API 21) ou sup√©rieur, chaque application s'ex√©cute
            dans son propre processus et avec sa propre instance d'Android Runtime (ART). ART est √©crit pour ex√©cuter
            plusieurs machines virtuelles sur des appareils √† faible m√©moire en ex√©cutant des fichiers DEX, un format de
            bytecode con√ßu sp√©cialement pour Android et optimis√© pour une empreinte m√©moire minimale. Anciennement on
            utilisait la DVM ou Dalvik Virtual Machine pour g√©rer les applications.
        </p>
      </article>
      <article>
        <h3>Biblioth√®ques C/C++ natives</h3>
        <p>De nombreux composants et services principaux du syst√®me Android sont construits √†
            partir des biblioth√®ques natives √©crites en C et C++.
            La plate-forme Android fournit des API de framework Java pour exposer les fonctionnalit√©s de certaines de
            ces biblioth√®ques natives aux applications.
        </p>
        <p>Si vous d√©veloppez une application qui n√©cessite du code C ou C++, vous pouvez utiliser le NDK Android pour
            acc√©der √† certaines de ces biblioth√®ques de plate-forme natives directement √† partir de votre code natif.
        </p>
      </article>
      <article>
        <h3>Java API Framework</h3>
        <p>L'ensemble des fonctionnalit√©s du syst√®me d'exploitation Android est √† votre disposition via des API √©crites
            en langage Java. Ces API constituent les blocs de construction dont vous avez besoin pour cr√©er des
            applications Android en simplifiant la r√©utilisation des composants et services syst√®me modulaires de base,.
        </p>
      </article>
      <article>
        <h3>Applications syst√®me</h3>
        <p>Android est livr√© avec un ensemble d'applications de base pour la messagerie √©lectronique, la messagerie SMS,
            les calendriers, la navigation sur Internet, les contacts, etc. Les applications incluses avec la
            plate-forme n'ont aucun statut particulier parmi les applications que l'utilisateur choisit d'installer.
            Ainsi, une application tierce peut devenir le navigateur Web par d√©faut de l'utilisateur.
        </p>
      </article>
      <article>
        <h3>Puissance t√©l√©phone</h3>
        <p>M√™me si les t√©l√©phone deviennent de plus en plus puissant, ne pas oublier qu'ils sont beaucoup moins
            puissants qu'un ordinateur. Une phase d'optimisation de l'application pourrait s'av√©rer n√©cessaire.
        </p>
      </article>
      <article>
        <h2>Historique</h2>
        <p>Google pas cr√©ateur d'Android !!</p>
        <p>Origine Android est Android Incorporated rachet√© par Google en 2005</p>
        <p>2007 l'Open Handset Alliance 35 entreprises √©voluant dans l'univers du mobile avec un OS OpenSource
        </p>
      </article>
      <article>
        <h2>Langage</h2>
        <p>Les applications Android peuvent √™tre √©crites √† l'aide des langages Kotlin, Java et C++. Les outils Android
            SDK compilent votre code avec tous les fichiers de donn√©es et de ressources dans un APK ou un Android App
            Bundle.
        </p>
        <p>Dans le cadre du cours, on utilisera Java pour √©viter d'avoir √† apprendre un nouveau langage.</p>
        <p>Dans la documentation Google veut pousser l'utilisation de Kotlin</p>
      </article>
      <article>
        <h2>ART - Dalvik</h2>
        <p>
          <a href="https://source.android.com/docs/core/runtime">ART</a>
          
            ou Android Runtime anciennement DVM ou Dalvik Virtual Machine
        
        </p>
      </article>
      <article>
        <h2>Hello World</h2>
        <p>Cr√©ation de la premi√®re application avec Android Studio et d√©ploiement dans l'√©mulateur ou le t√©l√©phone</p>
      </article>
    </section>
    <section>
      <h1>Architecture</h1>
      <p>Une application android est compos√©e de trois parties</p>
      <ul>
        <li>Les Composants de base</li>
        <li>Les ressources de l'application</li>
        <li>Les fichiers de configuration</li>
      </ul>
      <article>
        <h2>Structure d'un projet android</h2>
        <pre><![CDATA[
                        MyApplication
                        ‚îú‚îÄ‚îÄ app
                        ‚îÇ   ‚îú‚îÄ‚îÄ libs
                        ‚îÇ   ‚îî‚îÄ‚îÄ src
                        ‚îÇ   ‚îú‚îÄ‚îÄ androidTest
                        ‚îÇ   ‚îú‚îÄ‚îÄ main
                        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ java  <--
                        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ res   <--
                        ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AndroidManifest.xml  <--
                        ‚îÇ   ‚îî‚îÄ‚îÄ test
                        ‚îú‚îÄ‚îÄ build.gradle  <--
                        ‚îî‚îÄ‚îÄ gradlew
                ]]></pre>
        <ul>
          <li>java : r√©pertoire avec toutes les classes et le code Java</li>
          <li>res : r√©pertoire avec tous les fichiers suppl√©mentaires, le contenu statique utilis√©s par votre
                code, tels que les bitmaps, les d√©finitions de mise en page, les textes d'interface utilisateur, les
                instructions d'animation, etc...
            </li>
          <li>AndroidManifest.xml : fichier de configuration du projet</li>
          <li>build.gradle : configuration pour gradle</li>
        </ul>
      </article>
      <article>
        <h2>Les Composants de base</h2>
        <p>Il existe 4 types de composants possibles dans une application Android :</p>
        <ul>
          <li>Les Activities</li>
          <li>Les Services</li>
          <li>Les Brodcast Receivers</li>
          <li>Les Contents Providers</li>
        </ul>
        <p>
          On peut aussi parler d'un 5·µâ objet
            
          <kbd>Intent</kbd>
          <a href="https://developer.android.com/guide/components/fundamentals#ActivatingComponents">DOC</a>
          
            qui sert
            √† faire la liaison entre les 3 premiers. Dans la doc, on le qualifie de messager asynchrone.
        
        </p>
      </article>
      <article>
        <h3>
          <a href="https://developer.android.com/guide/components/activities/intro-activities">Activity</a>
        </h3>
        <p>Une activit√© est le point d'entr√©e pour interagir avec l'utilisateur. Il repr√©sente un √©cran unique avec une
            interface utilisateur.
        </p>
        <p>En tant que telle, une application diff√©rente peut d√©marrer l'une de ces activit√©s si l'application de
            messagerie le permet. Par exemple, une application d'appareil photo peut d√©marrer l'activit√© dans
            l'application de messagerie qui compose un
            nouveau courrier pour permettre √† l'utilisateur de partager une image.
        </p>
        <p>Une activit√© facilite les interactions cl√©s suivantes entre le syst√®me et l'application.
        </p>
        <p>On reviendra en d√©tail sur ce composant dans la suite du cours.</p>
      </article>
      <article>
        <h3>
          <a href="https://developer.android.com/guide/components/services">Services</a>
        </h3>
        <p>Un service est un point d'entr√©e √† usage g√©n√©ral pour maintenir une application en arri√®re-plan un peu comme
            un thread.
        </p>
        <p>Il s'agit d'un composant qui s'ex√©cute en arri√®re-plan pour effectuer des op√©rations de longue dur√©e ou pour
            effectuer des t√¢ches pour des processus distants.
            Un service ne fournit pas d'interface utilisateur.
        </p>
        <ul>
          <li>Musique en arri√®re plan</li>
          <li>R√©cup√©rer des donn√©es sur le r√©seau sans bloquer l'interaction avec les activity</li>
        </ul>
        <p>Peut √™tre d√©marr√© par une Activity et continuer de s'ex√©cuter en arri√®re plan</p>
        <p>Il existe deux types de services qui indiquent au syst√®me comment g√©rer une application:</p>
        <ul>
          <li>Les services d√©marr√©s (started services)</li>
          <li>Les services li√©s. (bound services)</li>
        </ul>
        <p>Si on a le temps, on traitera les services dans le cours, mais pas √©valuer dans le cours.</p>
      </article>
      <article>
        <h3>
          <a href="https://developer.android.com/reference/android/content/BroadcastReceiver">Broadcast receivers</a>
        </h3>
        <p>Composant qui permet au syst√®me de transmettre des √©v√©nements √† l'application en dehors d'un flux
            d'utilisateurs r√©gulier
        </p>
        <p>Permet √† l'application de r√©pondre aux annonces de diffusion √† l'√©chelle du syst√®me</p>
        <ul>
          <li>D√©finir une alarme</li>
          <li>Publier une notification</li>
          <li>Niveau de la batterie (Quand elle est faible)</li>
        </ul>
      </article>
      <article>
        <h3>
          <a href="https://developer.android.com/guide/topics/providers/content-providers">Les Contents Providers</a>
        </h3>
        <p>Pour g√©rer un ensemble de donn√©es dans le syst√®me de fichiers, dans une base de donn√©es SQLite, sur le Web ou
            sur tout autre emplacement de stockage persistant auquel votre application peut acc√©der.
        </p>
        <p>Pour le syst√®me, content provider est un point d'entr√©e dans une application pour acc√©der √† des donn√©es
            nomm√©es, identifi√©s par un sch√©ma d'URI.
        </p>
      </article>
      <article>
        <h2>
          <a href="https://developer.android.com/guide/topics/resources/providing-resources">Les ressources</a>
        </h2>
        <p>Dans ce r√©pertoire se trouve les ressources que vous allez utiliser dans votre application.</p>
        <p>Les ressources sont regroup√©es par type dans un sous r√©pertoire correspondant :</p>
        <pre><![CDATA[
                R√©pertorie ressource commun :
                main
                ‚îú‚îÄ‚îÄ java
                ‚îî‚îÄ‚îÄ res
                   ‚îú‚îÄ‚îÄ drawable
                   ‚îú‚îÄ‚îÄ layout
                   ‚îú‚îÄ‚îÄ mipmap
                   ‚îî‚îÄ‚îÄ values
            ]]></pre>
        <p>
          Vous pouvez avoir la liste de tous les sous type 
          <a href="https://developer.android.com/guide/topics/resources/available-resources">ICI
        </a>
           mais pour le moment on va d√©crire les plus communes.
        
        </p>
        <ul>
          <li>drawable : Fichiers bitmap (.png, .jpg, .gif) ou XML.</li>
          <li>layout : Fichiers XML qui d√©finissent la mise en page d'une interface utilisateur</li>
          <li>values : Fichiers XML contenant des valeurs simples, telles que des cha√Ænes, des entiers et des
                couleurs.
            </li>
        </ul>
        <p>
          Dans le r√©pertoire 
          <kbd>res/value</kbd>
           on pourra avoir :
        
        </p>
        <ul>
          <li>des couleurs</li>
          <li>des chaines de caract√®re</li>
          <li>des tableaux(int, string ...)</li>
          <li>des styles</li>
        </ul>
        <p>On peut faire plusieurs fichiers pour s√©parer les ressources et s'y retrouver plus facilement.</p>
        <p>Il en existe d'autres sous types, mais on les verra au fur et √† mesure des besoins.</p>
        <p>On reviendra plus tard su comment acc√©der et utiliser les ressources.</p>
      </article>
      <article>
        <h2>Les fichiers de configurations</h2>
        <p>Le syst√®me de build Android compile les ressources et le code source de l'application et les regroupe dans
            des APK(Application PacKage) ou des bundles d'applications Android(AAB) que vous pouvez tester, d√©ployer,
            signer et distribuer.
        </p>
        <p>Android Studio utilise Gradle, pour automatiser et g√©rer le processus de construction tout en vous permettant
            de d√©finir des configurations de construction flexibles et personnalis√©es.
        </p>
        <p>Chaque projet d'application doit avoir un fichier AndroidManifest.xml (portant pr√©cis√©ment ce nom) √† la
            racine de l'ensemble source du projet. Le fichier manifeste d√©crit les informations essentielles sur votre
            application pour les outils de g√©n√©ration Android, le syst√®me d'exploitation Android et Google Play. On va
            avoir dans ce fichier:
        </p>
      </article>
      <article>
        <h3>
          AndroidManifest.xml
            
          <a href="https://developer.android.com/guide/topics/manifest/manifest-intro">DOC</a>
        </h3>
        <pre>
          <code class="xml"><![CDATA[
                    <?xml version="1.0" encoding="utf-8"?>
                    <manifest
                        xmlns:android="http://schemas.android.com/apk/res/android"
                        android:versionCode="1"
                        android:versionName="1.0">
                    
                        <uses-feature android:name="android.hardware.sensor.compass"
                            android:required="true" />
                    
                        <application
                            android:allowBackup="true"
                            android:icon="@mipmap/ic_launcher"
                            android:roundIcon="@mipmap/ic_launcher_round"
                            android:label="@string/app_name"
                            android:supportsRtl="true"
                            android:theme="@style/AppTheme">
                    
                            <activity android:name=".MainActivity">
                                <intent-filter>
                                    <action android:name="android.intent.action.MAIN" />
                                    <category android:name="android.intent.category.LAUNCHER" />
                                </intent-filter>
                            </activity>
                            <activity
                                android:name=".DisplayMessageActivity"
                                android:parentActivityName=".MainActivity" />
                        </application>
                    </manifest>
            ]]></code>
        </pre>
        <p>On va retrouver dans ce fichier :</p>
        <ul>
          <li>android:label -&gt; le nom de l'application</li>
          <li>android:icon -&gt; l'icon de l'application visible dans le t√©l√©phone</li>
          <li>La liste des diff√©rents composants (Activity, Service, Brodcast Receiver, Content Provider</li>
          <li>Le point d'entr√©e de l'application</li>
          <li>La liste des permissions que l'application a besoin (ex : utiliser le r√©seau)</li>
          <li>Les pr√©requis au niveau Hardware pour utiliser l'application</li>
        </ul>
      </article>
      <article>
        <h3>
          build.gradle
            
          <a href="https://developer.android.com/studio/build">DOC</a>
        </h3>
        <pre>
          <code class="gradle"><![CDATA[
                plugins {
                    id 'com.android.application'
                }
                android {
                    namespace 'com.example.appname'
                    compileSdk 32
                    defaultConfig {
                        applicationId "com.example.appname"
                        minSdk 25
                        targetSdk 32
                        versionCode 1
                        versionName "1.0"
                        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
                    }
                    buildTypes {
                        release {
                            minifyEnabled false
                            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
                        }
                    }
                    compileOptions {
                        sourceCompatibility JavaVersion.VERSION_1_8
                        targetCompatibility JavaVersion.VERSION_1_8
                    }
                }
                dependencies {
                    implementation 'androidx.appcompat:appcompat:1.5.1'
                    implementation 'com.google.android.material:material:1.7.0'
                    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'
                    testImplementation 'junit:junit:4.13.2'
                    androidTestImplementation 'androidx.test.ext:junit:1.1.3'
                    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'
                }
            ]]></code>
        </pre>
        <p>Informations Importantes :</p>
        <ul>
          <li>target : La version du SDK utilis√© pour compiler</li>
          <li>minSDK : La version minimale support√©e</li>
          <li>versionCode et versionName : la version de l'application. Utilis√© par le play-store pour savoir s'il y a
                des mises √† jour a faire
            </li>
          <li>dependencies : comme maven, permet d'ajouter des librairies externes dans le projet</li>
        </ul>
        <p>Lorsque l'on veut modifier ces valeurs, on peut le faire manuellement, mais il est conseill√© de passer par
            l'interface graphique d'Android Studio. Pour y acc√©der il suffit d'aller dans File
        </p>
        <img class="img-fluid rounded" src="../asset/projet_structure.png" alt=""/>
      </article>
      <article>
        <h2>Version d'Android et choix</h2>
        <p>Cette documentation a √©t√© mise √† jour en janvier 2023. Lors de la cr√©ation d'un projet android nous propose
            de l'aide pour choisir la version cible.
        </p>
        <img class="img-fluid rounded" src="../asset/version_api.png" alt="" data-title="Liste des versions d'Android et pourcentage de t√©l√©phone  l'utilisant"/>
        <p>Ici on peut voir la liste des versions et des API correspondante. On voit aussi le pourcentage de t√©l√©phone
            que l'on va toucher si on choisit une version.
        </p>
        <p>Par exemple La version 7.1 Nougat avec l'API 25 va toucher 90% des t√©l√©phones. Dans ce cas, on pourrait se
            dire je vais utiliser l'API 17 qui va toucher 99.9% des t√©l√©phones. Pas forc√©ment un bon calcul. Si dans
            votre application vous avez besoin d'utiliser l'empreinte digitale ce ne sera pas possible, car c'est
            seulement dans l'API 23 que cette fonctionnalit√© apparait.
        </p>
        <p>En gros, plus on utilise des fonctionnalit√©s r√©centes moins on va toucher de t√©l√©phone, car il faut attendre
            que les gens mettent √† jour le t√©l√©phone. Or sous Android ce n'est pas toujours possible. Le syst√®me va
            mettre √† jour le t√©l√©phone que si celui-ci est capable de le supporter au niveau hardware.
        </p>
        <p>Au moment de concevoir votre application il faudra se poser la question. Quel type de population je veux
            toucher ? Quelles fonctionnalit√©s j'ai absolument besoin d'avoir?
        </p>
      </article>
      <article>
        <h2>
          Logcat et Log
            
          <a href="https://developer.android.com/studio/debug/am-logcat">DOC</a>
        </h2>
      </article>
      <article>
        <h3>Logcat</h3>
        <p>La fen√™tre Logcat d'Android Studio affiche les messages syst√®me et les messages que vous avez ajout√©s √† votre
            application avec la classe Log. Il affiche les messages en temps r√©el et conserve un historique afin que
            vous puissiez voir les messages plus anciens.
        </p>
        <p>Tr√®s utile pour d√©boguer une application :</p>
        <img class="img-fluid rounded" src="../asset/logcat.png" alt=""/>
        <p>On peut aussi filtrer les logs en fonction du label ou de la priorit√© du log.</p>
      </article>
      <article>
        <h3>
          Log
            
          <a href="https://developer.android.com/reference/android/util/Log">DOC</a>
        </h3>
        <p>
          La classe 
          <kdb>Log</kdb>
           vous permet de cr√©er des messages de journal qui apparaissent dans logcat. En r√®gle
            g√©n√©rale,
            vous devez utiliser les m√©thodes de journalisation suivantes, r√©pertori√©es dans l'ordre de priorit√© la plus
            √©lev√©e √† la plus faible.
        
        </p>
        <ul>
          <li>Log.e(String, String) (error)</li>
          <li>Log.w(String, String) (warning)</li>
          <li>Log.i(String, String) (information)</li>
          <li>Log.d(String, String) (debug)</li>
          <li>Log.v(String, String) (verbose)</li>
        </ul>
        <p>Le premier String est le label unique du message. On l'utilisera dans le logcat pour retrouver rapidement
            notre message
        </p>
        <p>Le deuxi√®me String est le message que l'on veut faire appara√Ætre</p>
        <p>Bien faire attention la m√©thode attend un STRING et pas un autre type. √Ä vous de faire la conversion de type
            s'il y a besoin.
        </p>
        <p>
          Il existe aussi un üòÑ 
          <a href="https://developer.android.com/reference/android/util/Log#wtf">
            Log.wtf(String,
            String)
        </a>
           üòÑ pour "What a Terrible Failure" ou Quel terrible √©chec. √Ä utiliser qu'en cas d'erreur
            incompr√©hensible.
        
        </p>
        <p>Faire attention que le Logcat ait bien le focus sur le bon t√©l√©phone et ensuite le bon projet. Quand on a
            plusieurs t√©l√©phones ainsi que des √©mulateurs en m√™me temps on peut vite se faire avoir.
        </p>
      </article>
    </section>
    <section>
      <h1>Activity</h1>
      <p>La classe Activity est un composant de base d'une application Android. Comprendre la fa√ßon dont les activit√©s
        sont
        lanc√©es et assembl√©es est aussi √©l√©ment fondamental pour la construction des applications mobiles. Contrairement
        aux
        paradigmes de programmation dans lesquels les applications sont lanc√©es avec une m√©thode main(), c'est le
        syst√®me
        Android initie le code dans une instance Activity en appelant des m√©thodes de rappel sp√©cifiques qui
        correspondent √† des √©tapes sp√©cifiques de son cycle de vie.
    </p>
      <article>
        <h2>Cycle de vie</h2>
        <p>La classe Activity fournit un certain nombre de methode callback qui permettent √† l'activit√© de savoir qu'un
            √©tat a chang√© : quand le syst√®me cr√©e, arr√™te ou reprend une activit√©, ou d√©truit le processus dans lequel
            l'activit√© r√©side.
        </p>
        <p>C'est ce qui permet de contr√¥ler l'activit√© sans avoir la main sur l'instance de l'objet.</p>
        <div class="container-fluid">
          <div class="row align-items-center">
            <div class="col-sm text-center">
              <img class="img-fluid rounded" src="../asset/activity_lifecycle.png" alt="life cycle of activity"/>
            </div>
            <div class="col-sm">
              <ul>
                <li>onCreate() : Cette m√©thode est appel√©e quand le syst√®me cr√©e votre activit√©.</li>
                <li>onStart() : Cette m√©thode est appel√©e juste avant que l'activit√© devienne visible.</li>
                <li>onResume() : Cette m√©thode est appel√©e juste avant que l'activit√© ne commence √† interagir
                            avec l'utilisateur.
                        </li>
                <li>onPause() : Cette m√©thode est appel√©e lorsque l'activit√© perd le focus et passe √† l'√©tat
                            Pause. L'activit√© est encore partiellement visible.
                        </li>
                <li>onStop() : Cette m√©thode est appel√©e lorsque l'activit√© n'est plus visible pour
                            l'utilisateur.
                        </li>
                <li>onDestroy() : Cette m√©thode est appel√©e avant qu'une activit√© ne soit d√©truite.</li>
                <li>onRestart() : Cette m√©thode est appel√©e car l'activit√© a √©t√© arr√™t√© et va √™tre red√©marr√©.
                        </li>
              </ul>
            </div>
          </div>
        </div>
      </article>
      <article>
        <h3>
          <a href="https://developer.android.com/guide/components/activities/activity-lifecycle#oncreate">onCreate()
            </a>
        </h3>
        <p>Logique de d√©marrage d'application de base qui ne doit se produire qu'une seule fois pendant toute la dur√©e
            de vie de l'activit√©. Par exemple :
        </p>
        <ul>
          <li>lier des donn√©es √† une liste</li>
          <li>instancier des variables ou des classes</li>
          <li>r√©cup√©rer les valeurs qui sont dans l'objet Bundle</li>
          <li>
            D√©finir les View ou ViewGroup qui composent la vue. M√©thode 
            <a href="https://developer.android.com/reference/android/app/Activity#setContentView(android.view.View)">
                setContentView()</a>
            . On verra en d√©tail son utilisation dans la suite du cours.
            
          </li>
        </ul>
        <pre>
          <code class="java"><![CDATA[
                    public class MainActivity extends AppCompatActivity {
                        @Override
                        protected void onCreate(Bundle savedInstanceState) {
                            super.onCreate(savedInstanceState);
                            setContentView(R.layout.activity_main);
                        }
                    }
                ]]></code>
        </pre>
      </article>
      <article>
        <h3>
          <a href="https://developer.android.com/guide/components/activities/activity-lifecycle#onstart">onStart()</a>
        </h3>
        <p>Juste avant que l'activit√© soit visible.</p>
        <p>Appel√©e juste apr√®s onCreate ou lorsque l'activit√© a √©t√© stopp√©</p>
        <p>m√©thode qui doit √™tre rapide</p>
      </article>
      <article>
        <h3>
          <a href="https://developer.android.com/guide/components/activities/activity-lifecycle#onresume">onResume()
            </a>
        </h3>
        <p>Il s'agit de l'√©tat dans lequel l'application interagit avec l'utilisateur et reste dans cet √©tat jusqu'√† la
            perte du focus.
        </p>
        <p>Appel√© apr√®s onStart ou lorsque l'activit√© a √©t√© onPause</p>
      </article>
      <article>
        <h3>
          <a href="https://developer.android.com/guide/components/activities/activity-lifecycle#onpause">onPause()</a>
        </h3>
        <p>Appel√© car l'activit√© va √™tre quitt√©.</p>
        <p>C'est ici qu'on doit arr√™ter toutes les taches qui n'ont pas lieux d'√™tre alors que l'activit√© n'est plus en
            premier plan (peut √™tre encore visible dans le cas du multiscreen).
        </p>
        <ul>
          <li>stop camera preview</li>
          <li>arr√™ter d'√©couter les sensors</li>
          <li>toute ressource qui affecte l'utilisation de la batterie</li>
          <li>execution de onPause() doit rester bref. Pas de grosse op√©ration ici(sauvegarder data, appeler le
                r√©seau)
            </li>
        </ul>
      </article>
      <article>
        <h3>
          <a href="https://developer.android.com/guide/components/activities/activity-lifecycle#onstop">onStop()</a>
        </h3>
        <p>Activit√© n'est plus visible</p>
        <p>Se produit quand une nouvelle activit√© est lanc√©e et qu'elle couvre tout l'√©cran ou quand on va
            simplement quitter l'application.
        </p>
        <p>Effectuer des op√©rations d'arr√™t relativement gourmandes en CPU. Par exemple, pour enregistrer des
            informations dans une base de donn√©es.
        </p>
        <p>m√™me si l'activit√© est stopp√©e, elle reste en m√©moire.</p>
        <p>Si l'activit√© revient au premier plan on aura onRestart() qui sera appel√©.</p>
      </article>
      <article>
        <h3>
          <a href="https://developer.android.com/guide/components/activities/activity-lifecycle#ondestroy">
                onDestroy()
            </a>
        </h3>
        <p>Activit√© est compl√©tement d√©truite car :</p>
        <ul>
          <li>l'activit√© est finie (utilisateur supprime application de la m√©moire ou finish() a √©t√© appel√©)</li>
          <li>Le syst√®me d√©truit l'activit√©, car il y a un changement de configuration comme rotation √©cran ou
                multi-screen
            </li>
        </ul>
      </article>
      <article>
        <h3>Test du cycle de vie</h3>
        <p>Toujours le meilleur moyen de comprendre, c'est souvent de tester.</p>
        <pre>
          <code class="java"><![CDATA[
                public class MainActivity extends AppCompatActivity {
                    private static final String TAG = "debug_app";
                    @Override
                    protected void onCreate(Bundle savedInstanceState) {
                        super.onCreate(savedInstanceState);
                        setContentView(R.layout.activity_main);
                        Log.d(TAG, "onCreate:");
                    }
                    @Override
                    protected void onStart() {
                        super.onStart();
                        Log.d(TAG, "onStart: ");
                    }
                    @Override
                    protected void onResume() {
                        super.onResume();
                        Log.d(TAG, "onResume: ");
                    }
                    @Override
                    protected void onPause() {
                        super.onPause();
                        Log.d(TAG, "onPause: ");
                    }
                    @Override
                    protected void onStop() {
                        super.onStop();
                        Log.d(TAG, "onStop: ");
                    }
                    @Override
                    protected void onDestroy() {
                        super.onDestroy();
                        Log.d(TAG, "onDestroy: ");
                    }
                }
            ]]></code>
        </pre>
      </article>
      <article>
        <h2>Cr√©er une Activity</h2>
        <p>Pour cr√©er une activit√©, il y a au moins deux √©tapes √† suivre. G√©n√©ralement on en ajoute une
            troisi√®me.
        </p>
      </article>
      <article>
        <h3>Cr√©er une classe qui h√©rite de Activity</h3>
        <pre>
          <code class="java"><![CDATA[
                public class FirstActivity extends Activity {
                }
            ]]></code>
        </pre>
        <p>C'est la classe la plus basique. Dans la pratique, on utilisera AppCompactActivity qui nous permettra d'avoir
            de la compatibilit√© avec les anciennes versions d'Android
        </p>
        <p>On va aussi red√©finir la m√©thode onCreate pour d√©finir la vue. Sinon on aura simplement un √©cran blanc ce qui
            n'est pas tr√®s utile.
        </p>
        <pre>
          <code class="java"><![CDATA[
                public class FirstActivity extends AppCompatActivity {
                    @Override
                    protected void onCreate(@Nullable Bundle savedInstanceState) {
                        super.onCreate(savedInstanceState);
                        setContentView(R.layout.activity_first);
                    }
                }
            ]]></code>
        </pre>
      </article>
      <article>
        <h3>Ajouter l'activit√© dans le manifest.xml</h3>
        <pre>
          <code class="xml"><![CDATA[
                <application
                       ... >
                    <activity android:name=".FirstActivity"
                        android:exported="true">
                        <intent-filter>
                            <action android:name="android.intent.action.MAIN" />
                            <category android:name="android.intent.category.LAUNCHER" />
                        </intent-filter>
                    </activity>
                </application>
            ]]></code>
        </pre>
        <p>Le tag intent-filter avec action et category permet d'expliquer que c'est le point d'entr√©e de
            l'application
        </p>
        <p>Si on avait une deuxi√®me activit√© le manifest ressemblerait √†</p>
        <pre>
          <code class="xml"><![CDATA[
                <application
                       ... >
                    <activity android:name=".FirstActivity"
                        android:exported="true">
                        <intent-filter>
                            <action android:name="android.intent.action.MAIN" />
                            <category android:name="android.intent.category.LAUNCHER" />
                        </intent-filter>
                    </activity>
                    <activity android:name=".SecondActivit√©"
                        android:exported="false"/>
                </application>
            ]]></code>
        </pre>
        <p>
          <kbd>android:exported</kbd>
          <ul>
            <li>
                    Si la valeur est true, l'activit√© est accessible √† n'importe quelle application et peut √™tre lanc√©e
                    avec le nom exact de la classe.
                </li>
            <li>Si la valeur est false, l'activit√© ne peut √™tre lanc√©e que par des composants de la m√™me
                    application, des applications ayant le m√™me ID utilisateur ou des composants syst√®me privil√©gi√©s. En
                    l'absence de filtres d'intent, il s'agit de la valeur par d√©faut.
                </li>
            <li>doit √™tre a true pour l'activit√© point d'entr√©e</li>
          </ul>
        </p>
      </article>
      <article>
        <h3>Cr√©er un fichier XML pour la vue</h3>
        <p>G√©n√©ralement on cr√©e un fichier xml dans les resources pour d√©finir la vue de l'activit√©. On peut toute fois
            s'en passer et faire une vue sans le XML, tout en code Java.
        </p>
      </article>
      <article>
        <h3>Utiliser le Wizard de Android Studio</h3>
        <p>Le plus simple est de faire new empty activity qui va faire ces trois √©tapes pour nous.</p>
        <div class="row">
          <div class="col text-center">
            <img class="img-fluid rounded" src="../asset/create_empty_activity.png" alt=""/>
          </div>
        </div>
      </article>
      <article>
        <h2>Comportement dans l'application</h2>
        <p>Une t√¢che est un ensemble d'activit√©s avec lesquelles les utilisateurs interagissent lorsqu'ils essaient de
            faire quelque chose dans votre application. Ces activit√©s sont dispos√©es dans une pile - la pile arri√®re -
            dans l'ordre dans lequel chaque activit√© est ouverte.
        </p>
        <div class="col text-center">
          <img class="img-fluid rounded" src="../asset/diagram_backstack.png" alt=""/>
        </div>
        <p>
            Lorsque l'activit√© en cours en d√©marre une autre, la nouvelle activit√© est pouss√©e en haut de la pile et
            prend le focus.
        </p>
        <p>L'activit√© pr√©c√©dente reste dans la pile est arr√™t√©e, mais conserve l'√©tat de son interface.</p>
        <p>Lorsque l'utilisateur effectue l'action de retour ou le programmeur utilise finish(), l'activit√© en cours est
            supprim√© du haut de la pile (l'activit√© est d√©truite) et l'activit√© pr√©c√©dente reprend (l'√©tat pr√©c√©dent de
            son interface utilisateur est restaur√©).
        </p>
        <p>Les activit√©s de la pile ne sont jamais r√©organis√©es, seulement ajout√© ou retir√©es de la pile</p>
        <p>Fonctionne comme une structure de donn√©e dernier entr√© premier sortie on dit aussi (FILO First In Last Out)
        </p>
        <p>Dans votre application il sera important de bien g√©rer vos activit√©s pour √©viter d'en avoir plusieurs m√™me
            instance dans la pile
        </p>
        <div class="row">
          <div class="col text-center">
            <img class="img-fluid rounded" src="../asset/diagram_multiple_instances.png" alt=""/>
          </div>
        </div>
        <p>
          Vous pouvez voir 
          <a href="https://developer.android.com/guide/components/activities/tasks-and-back-stack#ManagingTasks">ici
        </a>
           comment changer le comportement de la pile. Mais une meilleure analyse adapt√©e au fonctionnement d'Android
            est pr√©f√©rable. En g√©n√©ral on ne veut pas changer le comportement par d√©faut.
        
        </p>
      </article>
      <article>
        <h2>Le Context</h2>
        <p>Interface qui poss√®de les informations globales sur un environnement d'application. Il s'agit d'une classe
            abstraite que chaque Activit√© impl√©mente. Il permet d'acc√©der :
        </p>
        <ul>
          <li>√† des ressources et √† des classes sp√©cifiques √† l'application</li>
          <li>des op√©rations sur l'application telles que le lancement d'activit√©s</li>
          <li>la diffusion et la r√©ception d'intentions</li>
          <li>et bien d'autre</li>
        </ul>
        <p>√ânorm√©ment de classe ont besoin du Context pour fonctionner.</p>
        <p>Il existe plusieurs fa√ßons de mettre la main dessus </p>
        <ul>
          <li>this</li>
          <li>getApplicationContext()</li>
          <li>getBaseContext()</li>
        </ul>
        <p>Voici la plus simple et qui permet de le retrouver facilement partout dans la classe.</p>
        <pre>
          <code class="java"><![CDATA[
                public class MainActivity extends AppCompatActivity {
                    Context context;
                    @Override
                    protected void onCreate(Bundle savedInstanceState) {
                        super.onCreate(savedInstanceState);
                        context = this; //don t forget this line, else you will have NullPointer
                        setContentView(R.layout.activity_main);
                    }
                }
            ]]></code>
        </pre>
      </article>
      <article>
        <h2>Container de View</h2>
        <p>Composant visuel de l'application</p>
        <p>Utilise setContentView pour d√©finir la vue</p>
        <p>La vue est compos√©e que d'objet de type View ou ViewGroup. Si on fait le parall√®le avec votre cours de React
            JS :
        </p>
        <div class="container-fluid">
          <div class="row align-items-center">
            <div class="col-sm">
              <ul>
                <li>View serait un Composant ou un √©l√©ment de vue graphique</li>
                <li>ViewGroup serait un Conteneur ou √©l√©ment de vue pour l'organisation ou le layout</li>
              </ul>
            </div>
            <div class="col-sm text-center">
              <img class="img-fluid rounded" src="../asset/viewgroup_and_view.png" alt=""/>
            </div>
          </div>
        </div>
        <p>Un chapitre entier sera consacr√© aux interfaces utilisateurs (UI)</p>
      </article>
      <!--    <article>-->
      <!--        <h2>Sauvegarder l'√©tat de l'activit√©</h2>-->
      <!--    </article>-->
    </section>
    <section>
      <h1>Les interfaces graphiques dans Android</h1>
      <article>
        <h2>Le Layout</h2>
        <p>Le layout (mise en page) d√©finit la structure de votre Interface Utilisateur(UI). Tous les √©l√©ments du UI
            sont
            construits √† l'aide de 2 type d'objet :
        </p>
        <ul>
          <li>Les View</li>
          <li>Les ViewGroup</li>
        </ul>
        <p>Au final Le Layout est compos√© d'un arbre d'objet, comme en javascript avec le DOM (Document Object Model)
        </p>
        <img class="img-fluid rounded" src="../asset/ui_hierarchie_layout.png" alt="view hi√©rarchie" data-title="Arbre des Objets composant un Layout"/>
        <p>Dans la documentation officielle, les View sont appel√©es commun√©ment des "widgets" et les ViewGroup sont
            appel√©es des "layouts". Pour √©viter de confondre entre "Layout" ViewGroup et "Layout" liste des objets
            cr√©ant la vue, dans ce cours les View seront des composants et les ViewGroup seront des containeurs de la
            vue et le Layout sera la combinaison de tous les composants et containeurs de la vue.
        </p>
        <p>
          Si on regarde dans la documentation de r√©f√©rence sur les 
          <a href="https://developer.android.com/reference/android/view/ViewGroup">ViewGroup
        </a>
           on peut voir qu'un ViewGroup h√©rite de View. Au final, on pourrait le voir comme un View poss√©dant une
            
          <![CDATA[
        List<View> ou un containeur de View.
        ]]>
        </p>
        <img class="img-fluid rounded" src="../asset/ui_reference_viewgroup.png"/>
      </article>
      <article>
        <h2>Containeurs et Components existant</h2>
        <p>Dans le SDK Android il y a d√©j√† des View et ViewGroup cod√©s pour nous. Voyons une liste des principaux
            utilis√©s dans ce cours.
        </p>
      </article>
      <article>
        <h3>Les containeurs</h3>
        <p>Permet d'avoir des enfants √† l'int√©rieur. En fonction des conteneurs les enfants auront un layout diff√©rent
        </p>
      </article>
      <article>
        <h4>
          <a href="https://developer.android.com/develop/ui/views/layout/linear">LinearLayout</a>
        </h4>
        <p>L'un des plus simples √† utiliser. Il permet d'avoir des enfants les uns en dessous des autres (VERTICAL) ou
            les uns a c√¥t√© des autres (HORIZONTAL).
        </p>
      </article>
      <article>
        <h4>
          <a href="https://developer.android.com/develop/ui/views/layout/relative">RelativeLayout</a>
        </h4>
        <p>Ce ViewGroupe affiche les enfants dans des positions relatives. La position de
            chaque enfant peut √™tre sp√©cifi√©e par rapport aux √©l√©ments enfants ou par rapport √† la zone parent
        </p>
      </article>
      <article>
        <h4>ScrollView</h4>
        <p>Permet d'ajouter un d√©filement si le contenu d√©passe de la vue. Existe aussi le HorizontalScrollView</p>
      </article>
      <article>
        <h4>
          <a href="https://developer.android.com/develop/ui/views/layout/constraint-layout">ConstraintLayout</a>
        </h4>
        <p>ConstraintLayout vous permet de cr√©er des mises en page volumineuses et complexes. Il est similaire au
            RelativeLayout en ce sens que toutes les vues ont dispos√©es en fonction des relations entre les vues, mais
            il est plus flexible que le RelativeLayout. Ce composant ne sera pas trait√© en cours.
        </p>
      </article>
      <article>
        <h3>Les Composants</h3>
        <p>Ce sont les composants d'affichage, comme un bouton un label ou une image.</p>
        <p>Voici une liste des principaux :</p>
        <ul>
          <li>
            <a href="https://developer.android.com/reference/android/widget/Button">Button</a>
            
                affiche un bouton avec un texte.
            
          </li>
          <li>
            <a href="https://developer.android.com/reference/android/widget/TextView">TextView</a>
            
                permet d'afficher du texte comme un label.
            
          </li>
          <li>
            <a href="https://developer.android.com/reference/android/widget/EditText">EditText</a>
            
                permet de demander √† l'utilisateur d'entrer du texte.
            
          </li>
          <li>
            <a href="https://developer.android.com/reference/android/widget/ImageView">ImageView</a>
            
                permet d'afficher une image dans la vue.
            
          </li>
          <li>
            <a href="https://developer.android.com/reference/android/widget/CheckBox">CheckBox</a>
            
                permet d'afficher une checkBox √† l'√©cran
            
          </li>
        </ul>
        <p>Il existe beaucoup d'autre composant, mais on ne peut pas tous les d√©tailler ici.</p>
      </article>
      <article>
        <h2>Les attributs XML</h2>
        <p>Chaque View et ViewGroup ont leurs propres attributs XML. Certains attributs sont sp√©cifiques √† un objet
            View, mais ces attributs sont h√©rit√©s du View parent. Comme tous les composants et containeurs h√©ritent de
            View ils ont plusieurs attributs en commun. Voici les quelques attributs importants. Pour la majorit√© ils
            viennent de View.
        </p>
      </article>
      <article>
        <h3>id</h3>
        <p>Tout objet View peut avoir un ID entier qui lui est associ√©, pour identifier de mani√®re unique la vue.
            Lorsque l'application est compil√©e, cet ID est r√©f√©renc√© sous forme d'entier, mais l'ID est
            g√©n√©ralement attribu√© dans le fichier XML de mise en page sous forme de cha√Æne, dans l'attribut id. Il
            s'agit d'un attribut XML commun √† tous les objets View. Voici la syntaxe de creation d'un id par XML.
        </p>
        <pre>
          <code class="xml"><![CDATA[
                    android:id="@+id/my_id"
                ]]></code>
        </pre>
        <p>ici le "@" veut dire qu'on va acc√©der aux ressources, le "+id" est l√† pour demander de cr√©er un id ou
            d'utiliser celui existant.
        </p>
        <p>Comme on l'a vu pr√©c√©demment on va pouvoir acc√©der au View depuis son id gr√¢ce √† findViewById(id_view).</p>
      </article>
      <article>
        <h3>Param√®tres du layout</h3>
        <p>
          Tous les attributs jouant sur le layout de la vue vont commencer par layout_quelquechose. Par exemple pour
            d√©finir le la largeur et la hauteur, on devra utiliser 
          <kbd>layout_width</kbd>
           et 
          <kbd>layout_height</kbd>
          .
            On peut d√©finir une taille exacte, mais la plupart du temps, on va pr√©f√©rer utiliser une de ses deux
            valeurs.
        
        </p>
        <ul>
          <li>wrap_content : demande √† la vue de prendre la taille de son contenu</li>
          <li>match_parent : demande √† la vue de prendre la taille de tout le parent</li>
        </ul>
      </article>
      <article>
        <h3>gravity / layout gravity</h3>
        <p>Gravity est l'attribut √† appliquer sur les enfants. Permet d'expliquer la position dans l'espace que l'enfant
            prend. Layout_gravity permet de d√©finir la position par rapport au parent.
        </p>
        <pre>
          <code class="xml"><![CDATA[
                    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                            xmlns:app="http://schemas.android.com/apk/res-auto"
                            xmlns:tools="http://schemas.android.com/tools"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:orientation="vertical"
                            tools:context=".MainActivity">
                        <TextView
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:text="Hello World!" />
                        <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_gravity="right"
                                android:text="Hello World!" />
                        <TextView
                                android:layout_width="match_parent"
                                android:gravity="right"
                                android:layout_height="wrap_content"
                                android:text="Hello World!" />
                        <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_gravity="center"
                                android:text="Hello World!" />
                    </LinearLayout>
                ]]></code>
        </pre>
        <div class="container-fluid">
          <div class="row align-items-center">
            <div class="col-sm">
              <img class="img-fluid rounded" src="../asset/manipulation_gravity_result.png"/>
              <p>
                        Voici le r√©sultat dans l'√©mulateur.
                    </p>
            </div>
            <div class="col-sm">
              <img class="img-fluid rounded" src="../asset/manipulation_gravity_draw.png"/>
              <p>Voici l'explication</p>
            </div>
          </div>
        </div>
      </article>
      <article>
        <h3>Poids des √©l√©ments (layout_weight)</h3>
        <p>Voici un attribut sp√©cifique au LinearLayout qui va √™tre tr√®s utile pour faire des designs Responsive. Il va
            nous permettre d'expliquer le poids que l'objet va prendre dans la vue
        </p>
        <p>Le LinearLayout va additionner tous les poids et faire en sorte que la vue la fraction d√©sir√©e du poids
            total.
        </p>
        <pre>
          <code class="xml"><![CDATA[
                    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                            xmlns:app="http://schemas.android.com/apk/res-auto"
                            xmlns:tools="http://schemas.android.com/tools"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:orientation="vertical"
                            tools:context=".MainActivity">
                        <Button
                                android:layout_width="match_parent"
                                android:layout_height="0dp"
                                android:layout_weight="40"
                                android:text="btn 1" />
                        <Button
                                android:layout_width="match_parent"
                                android:layout_height="0dp"
                                android:layout_weight="60"
                                android:text="btn 2" />
                    </LinearLayout>
                ]]></code>
        </pre>
        <p>Ici comme le LinearLayout est vertical il va additionner tous les poids soit 60+40 = 100 et faire en sorte
            que le premier bouton fasse 40/100 et le deuxi√®me 60/100
        </p>
        <img class="img-fluid rounded" src="../asset/manipulation_weight_verticale.png"/>
        <pre>
          <code class="xml"><![CDATA[
                    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                            xmlns:app="http://schemas.android.com/apk/res-auto"
                            xmlns:tools="http://schemas.android.com/tools"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:orientation="horizontal"
                            tools:context=".MainActivity">
                        <Button
                                android:layout_width="0dp"
                                android:layout_height="match_parent"
                                android:layout_weight="2"
                                android:text="btn 1" />
                        <Button
                                android:layout_width="0dp"
                                android:layout_height="match_parent"
                                android:layout_weight="5"
                                android:text="btn 2" />
                    </LinearLayout>
                ]]></code>
        </pre>
        <p>Dans le cas ou le LinearLayout est horizontal le poids sera sur le width</p>
        <img class="img-fluid rounded" src="../asset/manipulation_weight_horizontale.png"/>
      </article>
    </section>
    <section>
      <h1>Manipulation des vues</h1>
      <article>
        <h2>Cr√©ation de la vue</h2>
        <p>Il existe 3 fa√ßons de cr√©er des UI :</p>
        <ul>
          <li>
            En utilisant le XML dans
                
            <kbd>res/layout</kbd>
          </li>
          <li>En cr√©ant des instances programmatiquement de ViewGroup et de View (Code Java)</li>
          <li>En Combinant XML et Code Java</li>
        </ul>
        <p>Dans tous les cas, il faudra d√©finir le Layout dans l'Activity. Pour cela on devra utiliser la m√©thode
            setContentView. Il existe plusieurs red√©finitions de cette m√©thode pour pouvoir affecter le layout √†
            l'Activity en fonction de la fa√ßon que l'on veut utiliser.
        </p>
        <pre>
          <code class="java"><![CDATA[
                    public class MainActivity extends AppCompatActivity {
                        Context context;
                        @Override
                        protected void onCreate(Bundle savedInstanceState) {
                            super.onCreate(savedInstanceState);
                            context = this;
                            //set UI width XML File
                            setContentView(R.layout.activity_main); //we give here reference of XML file
                            
                            //set view width Java File
                            LinearLayout container = new LinearLayout(context);
                            setContentView(container);
                        }
                    }
                ]]></code>
        </pre>
        <p>Comme on voit, on d√©finit le Layout dans onCreate. Normalement, on n'appelle pas deux fois setContentView,
            mais si vous le fa√Æte, seul le dernier va d√©finir la vue en √©crasant le pr√©c√©dent.
        </p>
      </article>
      <article>
        <h3>En Utilisant le XML</h3>
        <p>
          Pour ce faire il faudra cr√©er un fichier XML dans les ressources. L'utilisation de XML facilite grandement le
            design du layout. Il permet de styliser la vue un peu comme en CSS dans les pages HTML (Le HTML est du XML).
            Dans l'IDE Android Studio on a aussi la possibilit√© d'utiliser un outil graphique : le 
          <a href="https://developer.android.com/studio/write/layout-editor">Layout Editor
            </a>
          . Il va nous permettre de cr√©er le layout et voir le r√©sultat dans l'Activity sans lanc√©e l'application
            (jusqu'√† certaines limites).
        
        </p>
        <p>Pour ouvrir le Layout Editor, il suffit de cliquer sur un fichier XML de layout dans les ressources
            (res/layout). Il existe trois modes de vue :
        </p>
        <img class="img-fluid rounded" src="../asset/ui_layout_editor_view_mode.png"/>
        <ul>
          <li>Le mode Code : on aura acc√®s seulement au XML</li>
          <li>Le mode Split : acc√®s au XML et √† la preview du XML. Sera souvent utiliser en cours</li>
          <li>Le mode Design : acc√®s qu'√† la preview. Permet d'ajouter des View ou ViewGroup par Drag And Drop ou
                encore d'acc√©der √† tous les attributs possibles pour chaque View.
            </li>
        </ul>
        <p>Voici un exemple de XML "activity_main.xml" qui va cr√©er un LinearLayout comme containeur principal avec un
            TextView comme enfant
        </p>
        <pre>
          <code class="xml"><![CDATA[
                        <?xml version="1.0" encoding="utf-8"?>
                        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                                xmlns:app="http://schemas.android.com/apk/res-auto"
                                xmlns:tools="http://schemas.android.com/tools"
                                android:layout_width="match_parent"
                                android:layout_height="match_parent"
                                android:orientation="vertical"
                                tools:context=".MainActivity">
                            <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="Hello World!" />
                        </LinearLayout>
                ]]></code>
        </pre>
        <p>Il faudra aussi avoir dans le code java l'instruction setContentView pour d√©finir la vue.</p>
        <pre>
          <code class="java"><![CDATA[
                    public class MainActivity extends AppCompatActivity {
                        @Override
                        protected void onCreate(Bundle savedInstanceState) {
                            super.onCreate(savedInstanceState);
                            setContentView(R.layout.activity_main);
                        }
                    }
                ]]></code>
        </pre>
        <p>On expliquera plus tard le R.layout.activity_main, mais pour faire rapide, c'est le moyen d'acc√©der aux
            Ressources depuis le code Java. On verra qu'il existe la m√™me chose quand on est dans le XML.
        </p>
      </article>
      <article>
        <h3>En utilisant le Java</h3>
        <p>Il faudra cr√©er des instances des diff√©rents √©l√©ments de la vue que vous voulez voir appara√Ætre.
            Inconv√©nient il faudra parfois aller chercher la m√©thode qui correspond √† l'attribut XML pour modifier le
            composant.
        </p>
        <p>Dans l'exemple xml pr√©c√©dent pour d√©finir la taille du composant, on utilise l'attribut layout_width et
            layout_height. Si on voulait faire la meme chose juste programmatiquement on ferait.
        </p>
        <pre>
          <code class="java"><![CDATA[
                TextView tv = new TextView(this);
                LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);
                tv.setLayoutParams(params);
                ]]></code>
        </pre>
        <p>Ici on voit qu'on doit passer par un objet LayoutParams pour donner la largeur et la hauteur du composant.
        </p>
        <p>Si l'on veut exactement la m√™me chose que dans le fichier XML pr√©c√©dent, on devra avoir le code :</p>
        <pre>
          <code class="java"><![CDATA[
                    public class MainActivity extends AppCompatActivity {
                        Context context;
                        @Override
                        protected void onCreate(Bundle savedInstanceState) {
                            super.onCreate(savedInstanceState);
                            context = this;
                            //create instance of linear layout
                            LinearLayout linearLayoutMain = new LinearLayout(context);
                            linearLayoutMain.setLayoutParams(new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT));
                            linearLayoutMain.setOrientation(LinearLayout.VERTICAL);
                            //add linearLayout as main container of activity
                            setContentView(linearLayoutMain);
                            //create textview
                            TextView textView = new TextView(context);
                            textView.setText("Hello World!");
                            textView.setLayoutParams(new LinearLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT));
                            //set text view as child of linearlayout
                            linearLayoutMain.addView(textView);
                        }
                    }
                ]]></code>
        </pre>
      </article>
      <article>
        <h3>En Combinant XML et Code Java</h3>
        <p>Au final, c'est rarement le XML ou le Java que l'on va utiliser pour cr√©er nos Layout. Mais plus
            une combinaison des deux.
        </p>
        <p>Quand on voudra ajouter des √©v√©nements ou modifier la vue pendant l'ex√©cution, on n'aura pas le choix de le
            faire en Java.
        </p>
        <p>Imaginons un mock up comme celui la</p>
        <img class="img-fluid rounded" src="../asset/ui_xml_and_java.png" alt="java and xml"/>
        <p>Si les vignettes rouges (une image et un texte) proviennent d'une base de donn√©e, on ne pourra pas savoir
            combien il y en aura en tout. On n'aura pas le choix de mettre la main sur la boite grise et d'ajouter
            programmatiquement les vignettes dans la vue. Par contre, on utilisera le XML pour styliser la vue.
        </p>
      </article>
      <article>
        <h2>Acc√©der aux View dans l'Activity</h2>
        <p>Souvent on va vouloir "mettre la main" sur une vue cr√©√©e en XML, pour √™tre capable d'interagir avec elle √†
            travers le code Java. Comme dans l'exemple pr√©c√©dent o√π on voulait remplir la boite grise de Vignette.
        </p>
        <p>Dans la classe View il existe un attribut id. C'est gr√¢ce √† cet id que l'on va √™tre capable de "mettre la
            main" sur une vue particuli√®re dans une activity.
        </p>
        <p>Il existe une methode findViewById(int id), cette m√©thode devrait vous rappeler une m√©thode utiliser en
            JavaScript pour mettre la main sur un √©l√©ment du DOM (document.getElementById()).
        </p>
        <p>Reprenons l'exemple pr√©c√©dent avec le TexView.</p>
        <pre>
          <code class="xml"><![CDATA[
                    <?xml version="1.0" encoding="utf-8"?>
                    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                            xmlns:app="http://schemas.android.com/apk/res-auto"
                            xmlns:tools="http://schemas.android.com/tools"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:orientation="vertical"
                            tools:context=".MainActivity">
                        <TextView
                                android:id="@+id/text_view"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Hello World!" />
                    </LinearLayout>
                ]]></code>
        </pre>
        <p>
          La ligne android:id="@+id/text_view" permet d'ajouter un attribut id sur le TextView, la valeur de l'id sera
            
          <b>text_view</b>
          . On expliquera plus tard le @ et le +. Voil√† le code pour acc√©der au TexteView depuis le
            Java.
        
        </p>
        <pre>
          <code class="java"><![CDATA[
                    public class MainActivity extends AppCompatActivity {
                        Context context;
                        @Override
                        protected void onCreate(Bundle savedInstanceState) {
                            super.onCreate(savedInstanceState);
                            context = this;
                            setContentView(R.layout.activity_main);
                            //access to textview
                            TextView textView = findViewById(R.id.text_view);
                            //change value of textview
                            textView.setText("New text to print");
                        }
                    }
                ]]></code>
        </pre>
        <p>Attention normalement findViewById est une methode de View, mais ils ont red√©fini cette m√©thode dans
            Activity pour aller chercher directement dans le Layout de la vue.
        </p>
      </article>
      <article>
        <h2>S√©rialisation / Des√©rialisation</h2>
        <p>La s√©rialisation est utilis√©e pour convertir un objet en un flux d'octets qui peut √™tre envoy√© vers
            n'importe quelle autre programme en cours d'ex√©cution via un r√©seau ou peut √™tre conserv√© sur le disque dans
            le but de le reconstruire plus tard.
        </p>
        <p>La des√©rialisation est le proc√©d√© inverse qui permettra de reconstruire un objet depuis le flux d'octets</p>
        <p>Il existe plusieurs formats de s√©rialisation comme :</p>
        <ul>
          <li>En Java, impl√©menter l'interface Serializable</li>
          <li>le JSON</li>
          <li>le XML</li>
        </ul>
        <p>Connaitre le format utilis√© est tr√®s important, pour √™tre capable de faire l'op√©ration dans les deux sens.
        </p>
        <img class="img-fluid rounded" src="../asset/manipulation_serialization.png"/>
      </article>
      <article>
        <h2>La d√©s√©rialisation en Android</h2>
        <p>
          Pour nous permettre d√©s√©rialiser il existe un objet 
          <a href="https://developer.android.com/reference/android/view/LayoutInflater">LayoutInflater</a>
          , √† qui on
            va donner le fichier XML √† transformer en View.
        
        </p>
        <p>Gr√¢ce √† cet objet, on va pouvoir cr√©er des vues en XML est les d√©s√©rialiser quand on en aura besoin.</p>
        <p>
          Soit le XML suivant
            
          <kbd>small_view.xml</kbd>
        </p>
        <pre>
          <code class="xml"><![CDATA[
                    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:orientation="horizontal"
                            android:padding="5dp">
                        <TextView
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="10"
                                android:background="#f00"
                                android:gravity="center"
                                android:textSize="20dp"
                                android:textColor="#fff"
                                android:text="Left" />
                        <TextView
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="10"
                                android:background="#0f0"
                                android:gravity="center"
                                android:textSize="20dp"
                                android:textColor="#fff"
                                android:text="Right" />
                        <TextView
                                android:id="@+id/tv_view_number"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="10"
                                android:background="#00f"
                                android:gravity="center"
                                android:textSize="20dp"
                                android:textColor="#fff"
                                android:text="No " />
                    </LinearLayout>
                ]]></code>
        </pre>
        <p>Si dans une activit√©, on veut ajouter 10 fois ce layout on devrait faire ceci.</p>
        <pre>
          <code class="java"><![CDATA[
                    public class InflatorActivity extends AppCompatActivity {
                        Context context;
                        @Override
                        protected void onCreate(Bundle savedInstanceState) {
                            super.onCreate(savedInstanceState);
                            context = this;
                            LinearLayout llMain = new LinearLayout(context);
                            llMain.setOrientation(LinearLayout.VERTICAL);
                            setContentView(llMain);
                            for (int i = 0; i < 10; i++) {
                                //deserialization of view
                                LinearLayout linearLayoutSmallView = (LinearLayout) LayoutInflater.from(context).inflate(R.layout.small_view,null);
                                TextView textViewNumberView = linearLayoutSmallView.findViewById(R.id.tv_view_number);
                                textViewNumberView.setText("No : " + (i+1));
                                llMain.addView(linearLayoutSmallView);
                            }
                        }
                    }
                ]]></code>
        </pre>
        <div class="container-fluid">
          <div class="row align-items-center">
            <div class="col-sm">
              <img class="img-fluid rounded" src="../asset/manipulation_inflateur_small_view.png"/>
            </div>
            <div class="col-sm">
              <p>Ici on voit qu'on a ajout√© 10 fois la petite vue.</p>
              <p>
                Une fois d√©s√©rialis√© on peut aussi aller chercher un element de la petite vue grace a
                        findViewById, mais ici il faudra faire :
                        
                <kbd>viewToInspect.findViewById</kbd>
              </p>
            </div>
          </div>
        </div>
        <p>Si on reprend l'exemple ou on m√©lange XML et Java.</p>
        <img class="img-fluid rounded" src="../asset/ui_xml_and_java.png"/>
        <p>On va pouvoir mettre la main sur le containeur gris et ensuite dans une boucle d√©s√©rialiser plusieurs fois le
            conteneur rouge et aller changer la valeur dedans.
        </p>
      </article>
    </section>
    <section>
      <h1>
        Les
        
        <a href="https://developer.android.com/guide/components/intents-filters#Types">Intent</a>
      </h1>
      <p>Intent est un objet messager pouvant r√©aliser une action sur les composants principaux. Il permet de faciliter la
        communication. Il existe trois cas d'utilisation :
    </p>
      <ul>
        <li>D√©marrer une Activit√© :</li>
        <li>D√©marrer un Service :</li>
        <li>D√©marrer un Broadcast :</li>
      </ul>
      <article>
        <h2>Introduction</h2>
        <p>il existe 2 types d'Intent:</p>
        <ul>
          <li>Intent Explicite : On va donner le nom sp√©cifique de l'activit√© qui va r√©aliser l'action. Plus utiliser
                pour d√©marrer des activit√©s qui sont dans notre application
            </li>
          <li>Intent Implicite : Ici on ne connait pas le nom de l'activit√©, mais on connait l'action que l'on
                voudrait r√©aliser(ex : voir image, envoyer sms, chercher fichier). C'est le syst√®me qui va chercher dans
                les applications les activit√©s capables de r√©aliser l'action et nous demander de choisir dans une liste.
                Tr√®s utile pour d√©marrer des activit√©s qui se trouvent dans une autre application.
            </li>
        </ul>
        <p>Dans le cadre de ce cours, on va se concentrer sur les intents explicites. On peut lister 3 cas d'utilisation
            lorsque l'on d√©marre une activit√© :
        </p>
        <ul>
          <li>Sans passage d'information</li>
          <li>Avec passage d'information</li>
          <li>Avec retour d'information</li>
        </ul>
      </article>
      <article>
        <h2>Intent explicite</h2>
      </article>
      <article>
        <h3>Sans passage d'information</h3>
        <p>Le plus simple, on va juste donner le nom de l'activit√© que l'on veut d√©marrer.</p>
        <pre>
          <code class="java"><![CDATA[
                Intent intent = new Intent(ctx,ClassName.class);
                startActivity(intent);
            ]]></code>
        </pre>
        <ul>
          <li>
            <kbd>ctx</kbd>
            
                : repr√©sente le Context de l'application.
            
          </li>
          <li>
            <kbd>ClassName.class</kbd>
            
                : repr√©sente le type de la classe √† d√©marrer. le 
            <em>.class</em>
             est utilis√© pour r√©cup√©rer le type.
                Tr√®s utilis√© en programmation quand on utilise les 
            <a href="https://docs.oracle.com/javase/tutorial/extra/generics/index.html">G√©n√©riques
            </a>
             ou que l'on fait de la
                
            <a href="https://docs.oracle.com/javase/tutorial/reflect/index.html">R√©flexion</a>
          </li>
        </ul>
        <p>startActivity() va demander au syst√®me de cr√©er une nouvelle Activit√© et l'ajouter en haut de la pile des
            activit√©s. C'est donc celle-ci qui va devenir visible.
        </p>
      </article>
      <article>
        <h3>Avec passage d'information</h3>
        <div class="container-fluid">
          <div class="row">
            <div class="col-sm-3 text-center">
              <img class="img-fluid rounded" src="../asset/intent_structure.png" alt="" data-title="Structure sch√©matique d'un objet Intent"/>
            </div>
            <div class="col-sm-9">
              <p>L'objet Intent est un messager, il peut donc aussi contenir un message. On va utiliser l'objet
                        extra pour sauvegarder de l'information. Celui-ci se comporte comme un HashMap avec une clef et
                        une valeur.
                    </p>
              <pre>
                <code class="java"><![CDATA[
                            Intent intent = new Intent(this, SecondeActivity.class);
                            intent.putExtra("name","user name");
                            intent.putExtra("id", "456-fesdf-464sdf");
                            intent.putExtra("year", 27);
                            startActivity(intent);
                        ]]></code>
              </pre>
              <p>Une fois dans SecondeActivity il faudra en premier lieu mettre la main sur l'Intent qui a
                        d√©marr√© l'activit√©. Pour cela, on utilise getIntent().
                    </p>
              <p>Reste √† r√©cup√©rer les valeurs avec les m√™mes clefs.</p>
              <pre>
                <code class="java"><![CDATA[
                            Intent intent = getIntent();
                            String nameValue = intent.getStringExtra("name");
                            String idValue = intent.getStringExtra("id");
                            int yearValue =  intent.getIntExtra("year", -1);
                        ]]></code>
              </pre>
              <p>dans le cas de getIntExtra on nous demande la valeur par d√©faut s'il ne trouve pas la clef.</p>
            </div>
          </div>
        </div>
        <p>On peut sch√©matiser par</p>
        <div class="text-center">
          <img class="img-fluid rounded text-center" src="../asset/intent_with_data.png" alt=""/>
        </div>
      </article>
      <article>
        <h3>Avec information retour</h3>
        <p>Dance ce cas, on va devoir d√©marrer l'activit√© en expliquant qu'on attend un r√©sultat en retour.</p>
        <pre>
          <code class="java"><![CDATA[
                ActivityResultLauncher<Intent> resultActivity = registerForActivityResult(
                        new ActivityResultContracts.StartActivityForResult(),
                        new ActivityResultCallback<ActivityResult>() {
                            @Override
                            public void onActivityResult(ActivityResult result) {
                                if (result.getResultCode() == RESULT_OK) {
                                    //do instruction when result
                                    Intent intent = result.getData();
                                    String dataString = intent.getStringExtra("dataKey");
                                }
                            }
                        }
                );
                Intent intent = new Intent(this, SecondeActivity.class);
                resultActivity.launch(intent);
            ]]></code>
        </pre>
        <p>ActivityResultLauncher est comme un √©v√©nement qu'on utiliserait. C'est la m√©thode onActivityResult qui sera
            appel√©e quand on reviendra sur l'activit√©. La m√©thode result.getData() nous permettra de mettre la main sur
            l'Intent avec les donn√©es qui proviennent de l'autre activit√©, ici SecondeActivity.
        </p>
        <p>Voyons le code dans la deuxi√®me activit√© pour ajouter de l'information.</p>
        <pre>
          <code class="java"><![CDATA[
                button.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        Intent intent = new Intent();
                        intent.putExtra("dataKey","hello data"); //1
                        setResult(RESULT_OK, intent); //2
                        finish(); //3
                    }
                });
            ]]></code>
        </pre>
        <p>Ici on ex√©cute du code quand on clique sur un bouton :</p>
        <ul>
          <li>
                //1 : on ajoute de l'info dans l'Intent
            </li>
          <li>
                //2 : m√©thode qui permet de d√©finir le code du r√©sultat (RESULT_OK, RESULT_CANCEL) et l'Intent avec les
                donn√©es en deuxi√®me param√®tre. Ce deuxi√®me param√®tre est optionnel. Si par exemple on envoie
                RESULT_CANCEL comme code, on ne voudra peut-√™tre pas ajouter d'Intent.
            </li>
          <li>//3 : permet de tuer programmatiquement l'Activity</li>
        </ul>
      </article>
    </section>
    <section>
      <h1>Les ressources dans Android</h1>
      <!--TODO resources with qualifier-->
    </section>
    <section>
      <h1>Les menus</h1>
      <p>
        R√©f√©rence vers la
        
        <a href="https://developer.android.com/develop/ui/views/components/menus">DOC</a>
      </p>
      <p>Les menus sont un composant d'interface utilisateur courant dans de nombreux types d'applications.</p>
      <p>Depuis Android 3.0 (API 11), les appareils ne sont plus tenus de fournir un bouton physique pour le menu.
        Pour palier √® ce probl√®me, on h√©rite de AppCompatActivity qui va g√©rer l'absence ou la pr√©sence du menu.
    </p>
      <p>Il existe trois types de menu</p>
      <ul>
        <li>Menu d'option (menu hamburger) et barre d'action</li>
        <li>Menu Contextuel</li>
        <li>Popup menu</li>
      </ul>
      <p>Dans le cadre du cours, on d√©taillera que le premier type de menu. Les autres s'utilisent de fa√ßon similaire</p>
      <article>
        <h2>D√©finition du menu XML</h2>
        <p>
          Comme pour les vues, on peut utiliser le xml pour d√©finir un menu. Le fichier se retrouvera dans le
            r√©pertoire 
          <kbd>res/menu</kbd>
          .
        
        </p>
        <p>Android Studio a ajout√© un Menu √âditeur graphique pour la cr√©ation des menus.</p>
        <p>Pour cr√©er un nouveau menu XML vous devez faire :</p>
        <div class="container-fluid">
          <div class="row align-items-center">
            <div class="col-sm">
              <img class="img-fluid rounded" src="../asset/menu_file_creation.png" alt=""/>
            </div>
            <div class="col-sm">
              <ul>
                <li>clic droit sur le r√©pertoire res</li>
                <li>New</li>
                <li>Android resource file</li>
                <li>selection menu into resource type</li>
              </ul>
            </div>
          </div>
        </div>
        <p>il existe 3 tags pour d√©finir les menus</p>
        <ul>
          <li>menu : conteneur pour les autres menus ou items. Doit √™tre le tag parent dans le fichier XML.</li>
          <li>item</li>
          <li>group</li>
        </ul>
        <div class="text-center">
          <img class="img-fluid rounded" src="../asset/menu_view.png" alt=""/>
        </div>
        <div class="container-fluid">
          <div class="row align-items-center">
            <div class="col-sm-4">
              <ul>
                <li>id : un ID unique qui permettra d'identifier cet item, doit √™tre unique dans le fichier
                            XML
                        </li>
                <li>title : texte qui sera afficher</li>
                <li>icon : r√©f√©rence vers l'image de l'ic√¥ne</li>
                <li>
                  showAsAction : pour d√©finir si le menu est dans l'action bar ou dans le menu. Valeurs
                            possibles :
                            
                  <ul>
                    <li>always</li>
                    <li>ifRoom</li>
                    <li>never</li>
                  </ul>
                </li>
              </ul>
            </div>
            <div class="col-sm-8">
              <pre>
                <code class="xml"><![CDATA[
                                <menu xmlns:android="http://schemas.android.com/apk/res/android"
                                    xmlns:app="http://schemas.android.com/apk/res-auto">
                                <item
                                        android:id="@+id/menu_play"
                                        android:icon="@android:drawable/ic_media_play"
                                        android:title="play"
                                        app:showAsAction="always" />
                                <item
                                        android:id="@+id/menu_stop"
                                        android:icon="@android:drawable/ic_media_stop"
                                        android:title="stop"
                                        app:showAsAction="always" />
                                <item
                                        android:id="@+id/menu_next"
                                        android:title="next"
                                        app:showAsAction="always" />
                                <item
                                        android:id="@+id/menu_pause"
                                        android:icon="@android:drawable/ic_media_pause"
                                        android:title="pause"
                                        app:showAsAction="ifRoom" />
                                <item
                                        android:id="@+id/menu_reset"
                                        android:title="reset"
                                        app:showAsAction="never" />
                            </menu>
                            ]]></code>
              </pre>
            </div>
          </div>
        </div>
      </article>
      <article>
        <h2>Menu d'option ou action</h2>
        <p>Apr√®s d√©finition du menu en XML, il va falloir l'associer √† l'activit√© ou on veut qu'il s'affiche</p>
        <p>Pour cela on va red√©finir la m√©thode onCreateOptionMenu</p>
        <pre>
          <code class="java"><![CDATA[
                @Override
                public boolean onCreateOptionsMenu(Menu menu) {
                    MenuInflater menuInflater = getMenuInflater();
                    menuInflater.inflate(R.menu.layout_menu, menu);
                    return true;
                }
            ]]></code>
        </pre>
        <p>Comme pour le XML des views on a un d√©-s√©rialiseur, ici le MenuInflater</p>
        <p>Pour ajouter programmatiquement un item on doit utiliser la m√©thode add() de l'objet Menu</p>
        <pre>
          <code class="java"><![CDATA[
                @Override
                public boolean onCreateOptionsMenu(Menu menu) {
                    int idItem = 1;        // exemple pour ajouter un item
                    int order = 1;
                    MenuItem menuItem = menu.add(0, idItem, order, "mon menu");
                    return true;
                }
            ]]></code>
        </pre>
      </article>
      <article>
        <h2>
          G√©rer l'√©v√©nement
            
          <a href="https://developer.android.com/develop/ui/views/components/menus#RespondingOptionsMenu">clic</a>
        </h2>
        <p>Lorsque l'utilisateur s√©lectionne un √©l√©ment dans le menu des options (ou l'action bar), le syst√®me appelle
            la m√©thode onOptionsItemSelected() de votre activit√©. Cette m√©thode transmet le MenuItem s√©lectionn√©.
        </p>
        <p>On pourra identifier l'item s√©lectionn√© gr√¢ce √† getItemId</p>
        <pre>
          <code class="java"><![CDATA[
                @Override
                public boolean onOptionsItemSelected(@NonNull MenuItem item) {
                    boolean retour = super.onOptionsItemSelected(item);
                    switch (item.getItemId()) {
                        case R.id.menu_play:
                            //action todo
                            retour = true;
                            break;
                        case R.id.menu_stop:
                            //action todo
                            retour = true;
                            break;
                        case R.id.menu_pause:
                            //action todo
                            retour = true;
                            break;
                        case R.id.menu_next:
                            //action todo
                            retour = true;
                            break;
                        case R.id.menu_reset:
                            //action todo
                            retour = true;
                            break;
                    }
                    return retour;
                }
            ]]></code>
        </pre>
      </article>
    </section>
    <section>
      <h1>Les Dialogs</h1>
      <p>
        R√©f√©rence vers la
        
        <a href="https://developer.android.com/develop/ui/views/components/dialogs">DOC</a>
      </p>
      <p>Une bo√Æte de dialogue est une petite fen√™tre qui affiche √† l'utilisateur de l'information, ou lui permet de
        prendre une d√©cision ou √† saisir des informations suppl√©mentaires.
    </p>
      <p>Les bo√Ætes de dialogue sont dites modales:</p>
      <ul>
        <li>elles bloquent l‚Äôinteraction avec l'activit√© en dessous et oblige √† faire une action</li>
        <li>elles passent au premier plan et l'activit√© en dessous est em surbrillance.</li>
      </ul>
      <article>
        <h2>Introduction</h2>
        <p>
          La classe de base pour faire un dialog est 
          <kbd>Dialog</kbd>
           mais on ne va pas utiliser celle-ci
            directement. Il faudrait tout red√©finir ce qui serait beaucoup de travail √† chaque fois. On va plut√¥t
            utiliser une des classes enfant d√©j√† √©crite pour nous :
        
        </p>
        <ul>
          <li>AlertDialog : Une bo√Æte de dialogue qui peut afficher un titre, jusqu'√† trois boutons, une liste
                d'√©l√©ments s√©lectionnables ou une mise en page personnalis√©e.
            </li>
          <li>DatePickerDialog ou TimePickerDialog : Une bo√Æte de dialogue avec une interface utilisateur pr√©d√©finie
                qui permet √† l'utilisateur de s√©lectionner une date ou une heure.
            </li>
        </ul>
      </article>
      <article>
        <h2>Mod√®le Builder</h2>
        <p>Pour cr√©er des AlertDialog il faut utiliser le mod√®le Builder (Builder pattern).</p>
        <p>Ce mod√®le permet de construire des objets complexes simplement.</p>
        <div class="container-fluid">
          <div class="row align-items-center">
            <div class="col-sm text-center">
              <img class="img-fluid rounded" src="../asset/builder.png" alt=""/>
            </div>
            <div class="col-sm">
              <p>Utilise les m√©thodes sur le builder</p>
              <p>m√©thode create va cr√©er une instance de l'AlertDialog</p>
              <p>permet de cr√©er rapidement un objet en √©vitant toute la complexit√©</p>
            </div>
          </div>
        </div>
      </article>
      <article>
        <h2>AlertDialog</h2>
        <p>La classe AlertDialog vous permet de cr√©er une vari√©t√© de design diff√©rent.</p>
        <p>Ce sera souvent la seule dont vous aurez besoin.</p>
        <div class="container-fluid">
          <div class="row align-items-center">
            <div class="col-sm text-center">
              <img class="img-fluid rounded" src="../asset/alert_dialog_layout.png" alt=""/>
            </div>
            <div class="col-sm">
              <p>1 - Titre : permet d'afficher un titre en haut, optionnel</p>
              <p>2 - Zone de contenue : tr√®s flexible, elle permet d'afficher un message, des listes ou une vue
                        personnalis√©e.
                    </p>
              <p>3 - Les boutons d'action : au nombre de trois maximums, optionnel</p>
            </div>
          </div>
        </div>
      </article>
      <article>
        <h3>un message simple</h3>
        <pre>
          <code class="java"><![CDATA[
                AlertDialog.Builder builder = new AlertDialog.Builder(context);
                builder.setTitle("my wonderful title");
                builder.setMessage("my beautiful Message to print ");
                AlertDialog dialog = builder.create();
                dialog.show();
                //or
                AlertDialog dialog = builder.show();
            ]]></code>
        </pre>
        <ul>
          <li>setTitle : permet de d√©finir le titre</li>
          <li>setMessage : d√©finir le contenu sous format texte</li>
          <li>create ou show : il est possible de faire create sur le builder puis show sur l'alertdialog, ou
                directement show sur le builder qui renvoie aussi l'instance de l'alertdialog.
            </li>
        </ul>
        <p>On peut aussi utiliser des strings qui proviendraient des ressources comme R.string.title_ad</p>
      </article>
      <article>
        <h3>Ajouter des boutons</h3>
        <p>Permet de demander une action √† l'utilisateur et d√©finir l'action √† faire.</p>
        <pre>
          <code class="java"><![CDATA[
                AlertDialog.Builder builder = new AlertDialog.Builder(context);
                builder.setTitle("my wonderful title");
                builder.setMessage("my beautiful Message to print ");
                builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        //action if yes is select
                    }
                });
                builder.setNeutralButton("i don't know", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        //action if i don't know is select
                    }
                });
                builder.setPositiveButton("no", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        //action if no select
                    }
                });
                AlertDialog dialog = builder.show();
            ]]></code>
        </pre>
      </article>
      <article>
        <h3>Ajouter une liste d'√©l√©ments</h3>
        <p>On peut ajouter 3 types de liste :</p>
        <ul>
          <li>Liste simple traditionnel</li>
          <li>Liste avec un choix possible (radio boutons)</li>
          <li>Liste avec plusieurs choix possible (checkboxes)</li>
        </ul>
      </article>
      <article>
        <h4>Liste simple</h4>
        <pre>
          <code class="java"><![CDATA[
                String[] items = new String[]{"orange","blue","green"};
                AlertDialog.Builder builder = new AlertDialog.Builder(context);
                builder.setTitle("my wonderful title");
                builder.setItems(items, new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        String value = items[which];//which = position of item select
                    }
                });
                AlertDialog dialog = builder.show();
            ]]></code>
        </pre>
        <p>Pour ajouter la liste d'√©l√©ments, on pourrait aussi utiliser les ressources avec un string-array</p>
        <pre>
          <code class="xml"><![CDATA[
                <string-array name="colors_list">
                    <item>orange</item>
                    <item>blue</item>
                    <item>green</item>
                </string-array>
            ]]></code>
        </pre>
        <p>on aurait alors dans le code</p>
        <pre>
          <code class="java"><![CDATA[
                builder.setItems(R.array.colors_list, new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        String[] items = getResources().getStringArray(R.array.colors_list); //pour r√©cup√©rer les donn√©es depuis le r√©pertoire Ressource
                        String value = items[which];//which = position of item select
                    }
                });
            ]]></code>
        </pre>
      </article>
      <article>
        <h4>Liste avec un choix unique</h4>
        <p>On utilisera la m√©thode setSingleChoiceItems(int itemsId, int checkedItem,final OnClickListener listener)</p>
        <ul>
          <li>itemsId : liste d'√©l√©ment √† afficher. Pourrait √™tre tableau de String aussi</li>
          <li>checkedItem : id de l'√©l√©ment d√©j√† s√©lectionn√© -1 si aucun selectionn√©</li>
          <li>listener : √©v√©nement lorsqu'on clique sur l'un des items.</li>
        </ul>
      </article>
      <article>
        <h4>Liste avec un choix multiple</h4>
        <p>On utilisera la m√©thode setMultiChoiceItems(int itemsId, boolean[] checkedItems, final
            OnMultiChoiceClickListener listener)
        </p>
        <ul>
          <li>itemsId : liste d'√©l√©ment √† afficher. Pourrait √™tre tableau de String aussi</li>
          <li>checkedItems : permet de dire qui est s√©lectionn√©, null si aucun</li>
          <li>listener : √©v√©nement lorsqu'on clique sur l'un des items.</li>
        </ul>
      </article>
      <article>
        <h3>D√©finir une vue personnalis√©</h3>
        <p>Il faut en premier cr√©er une vue, soit programmatiquement, soit en utilisant un fichier xml. Ensuite, il faut
            utiliser la m√©thode setView(View) sur le Builder pour d√©finir la vue.
        </p>
        <pre>
          <code class="xml" data-title="vue d√©finie en xml"><![CDATA[
                <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:orientation="vertical">
                    <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal">
                        <TextView
                                android:layout_width="0px"
                                android:layout_height="wrap_content"
                                android:layout_weight="30"
                                android:text="login : " />
                        <EditText
                                android:id="@+id/ed_login_ad"
                                android:layout_width="0px"
                                android:layout_height="wrap_content"
                                android:layout_weight="70" />
                    </LinearLayout>
                    <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal">
                        <TextView
                                android:layout_width="0px"
                                android:layout_height="wrap_content"
                                android:layout_weight="30"
                                android:text="password : " />
                        <EditText
                                android:id="@+id/ed_password_ad"
                                android:layout_width="0px"
                                android:layout_height="wrap_content"
                                android:layout_weight="70" />
                    </LinearLayout>
                </LinearLayout>
            ]]></code>
        </pre>
        <pre>
          <code class="java" data-title="code java pour un alert dialog avec une vue perso"><![CDATA[
                AlertDialog.Builder builder = new AlertDialog.Builder(context);
                builder.setTitle("my wonderful title");
                View view = LayoutInflater.from(context).inflate(R.layout.alert_dialog_layout,null);
                builder.setView(view);
                AlertDialog dialog = builder.show();
                ]]></code>
        </pre>
        <p>On peut utiliser la m√©thode findViewById sur view pour mettre la main sur les √©l√©ments de la vue de
            l'alertdialog.
        </p>
        <pre>
          <code class="java"><![CDATA[
                EditText edLogin = view.findViewById(R.id.ed_login_ad);
            ]]></code>
        </pre>
      </article>
      <article>
        <h4>d√©finir un √©v√©nement</h4>
        <p>On pourrait tr√®s bien ajouter un bouton dans la vue et red√©finir l'√©v√©nement dessus, on pourrait aussi
            ajouter les boutons pr√©d√©finis du builder.
        </p>
        <pre>
          <code class="java"><![CDATA[
                builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        AlertDialog alertDialog = (AlertDialog) dialog;
                        EditText edLogin = alertDialog.findViewById(R.id.ed_login_ad);
                    }
                });
            ]]></code>
        </pre>
        <p>
          Lors de la red√©finissions de l'√©v√©nement, on peut mettre la main sur l'alertdialog en castant (DownCast) le
            DialogInterface. On peut alors aller r√©cup√©rer n'importe quel √©l√©ment de la vue avec 
          <kbd>findViewById</kbd>
          .
        
        </p>
      </article>
    </section>
    <section>
      <h1>Les √©v√©nements Android</h1>
      <p>Il existe plusieurs fa√ßons d'intercepter les √©v√©nements provenant de l'utilisateur. L'approche consiste √†
        capturer les √©v√©nements √† partir de l'objet View sp√©cifique avec lequel l'utilisateur interagit. La classe View
        fournit plusieurs moyens de le faire.
    </p>
      <p>On peut cat√©goriser ces √©v√©nements en 2 types :</p>
      <ul>
        <li>"Les classiques" comme vu en java ou en C#</li>
        <li>Les sp√©cialis√©s √† Android</li>
      </ul>
      <article>
        <h2>Les √©v√©nements classiques</h2>
        <p>Comme d√©j√† utilis√© dans d'autres cours. C'est une simple m√©thode de retour (CallBack) que l'on red√©finie.</p>
      </article>
      <article>
        <h3>Event sur les View</h3>
        <p>
          <a href="https://developer.android.com/develop/ui/views/touch-and-input/input-events">DOC</a>
        </p>
        <p>Sur toutes les interfaces qui h√©ritent de View on aura ces √©v√©nements.</p>
      </article>
      <article>
        <h4>onClick</h4>
        <p>Ceci est appel√© lorsque l'utilisateur touche l'√©l√©ment.</p>
        <pre>
          <code class="java"><![CDATA[
                    view.setOnClickListener(new View.OnClickListener() {
                        @Override
                        public void onClick(View v) {
                            //action to do
                            v.setBackgroundColor(Color.GREEN);
                        }
                    });
                ]]></code>
        </pre>
        <p>On a la View sur laquelle on a cliqu√© en param√®tre de onClick</p>
      </article>
      <article>
        <h4>onLongClick</h4>
        <p>D√©clench√© quand l'utilisateur reste appuy√© sur une view</p>
        <pre>
          <code class="java"><![CDATA[
                    view.setOnLongClickListener(new View.OnLongClickListener() {
                        @Override
                        public boolean onLongClick(View v) {
                            return true;
                        }
                    });
                ]]></code>
        </pre>
        <p>onLongClick renvoie un boolean, il permet de savoir si l'√©v√©nement a √©t√© consomm√© ou non.</p>
      </article>
      <article>
        <h4>onFocusChange</h4>
        <p>D√©clench√© lorsque l'utilisateur navigue vers, ou hors de l'√©l√©ment, en utilisant les touches de navigation
        </p>
        <pre>
          <code class="java"><![CDATA[
                    view.setOnFocusChangeListener(new View.OnFocusChangeListener() {
                        @Override
                        public void onFocusChange(View v, boolean hasFocus) {
                            if(hasFocus){
                                v.setBackgroundColor(Color.GREEN);
                            }else{
                                v.setBackgroundColor(Color.BLUE);
                            }
                        }
                    });
                ]]></code>
        </pre>
        <p>Va fonctionner davantage pour les views qui requi√®rent une interaction (ex : EditText)</p>
      </article>
      <article>
        <h3>√âv√©nement sur changement de Text</h3>
        <pre>
          <code class="java"><![CDATA[
                    editText.addTextChangedListener(new TextWatcher() {
                        @Override
                        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                        }
                        @Override
                        public void onTextChanged(CharSequence s, int start, int before, int count) {
                        }
                        @Override
                        public void afterTextChanged(Editable s) {
                        }
                    });
                ]]></code>
        </pre>
        <p>Permet de contr√¥ler les actions sur un EditText</p>
      </article>
      <article>
        <h3>√âv√©nement sur CheckBox, RadioButton, RadioGroup, ToggleButton</h3>
        <pre>
          <code class="java"><![CDATA[
                    radioButton.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
                        @Override
                        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                        }
                    });
                ]]></code>
        </pre>
      </article>
      <article>
        <h2>√âv√©nement Sp√©cialis√©</h2>
      </article>
      <article>
        <h2>boolean de retour</h2>
        <ul>
          <li>onLongClick</li>
          <li>onKey</li>
          <li>onTouch</li>
        </ul>
        <p>Cela renvoie un bool√©en pour indiquer si vous avez consomm√© l'√©v√©nement et qu'il ne doit
            pas √™tre port√© plus loin. Autrement dit, renvoyez true pour indiquer que vous avez g√©r√© l'√©v√©nement et
            qu'il devrait s'arr√™ter ici ; renvoie false si vous ne l'avez pas g√©r√© et/ou si l'√©v√©nement doit
            continuer pour tous les autres √©couteurs au clic.
        </p>
      </article>
      <article>
        <h3>onTouch</h3>
        <p>C'est un √©v√©nement particulier des appareils tactiles. Quand l'utilisateur place 1 ou plusieurs doigts sur
            l'√©cran √ßa d√©clenche la m√©thode de rappel onTouchEvent.
        </p>
        <p>L'√©v√©nement va prendre en compte :</p>
        <ul>
          <li>la position</li>
          <li>la pression</li>
          <li>la taille</li>
          <li>le nombre de doigt</li>
        </ul>
        <p>C'est √† travers l'objet MotionEvent que l'on pourra r√©cup√©rer toutes ses informations</p>
      </article>
      <article>
        <h4>D√©tecter l'√©tat</h4>
        <p>Gr√¢ce a la M√©thode getActionMasked on est capable de r√©cup√©rer l'√©tat du touch de l'√©cran. Savoir si le doigt
            est pos√©, bouge ou est soulev√©
        </p>
        <pre>
          <code class="java"><![CDATA[
                    public class MainActivity extends AppCompactActivity {
                    ...
                    // exemple pour une activit√©, mais m√™me approche pour une sous classe de View
                    @Override
                    public boolean onTouchEvent(MotionEvent event){
                    
                        int action = MotionEventCompat.getActionMasked(event);
                    
                        switch(action) {
                            case (MotionEvent.ACTION_DOWN) :
                                Log.d(DEBUG_TAG,"Action was DOWN");
                                return true;
                            case (MotionEvent.ACTION_MOVE) :
                                Log.d(DEBUG_TAG,"Action was MOVE");
                                return true;
                            case (MotionEvent.ACTION_UP) :
                                Log.d(DEBUG_TAG,"Action was UP");
                                return true;
                            case (MotionEvent.ACTION_OUTSIDE) :
                                Log.d(DEBUG_TAG,"Movement occurred outside bounds " +
                                        "of current screen element");
                                return true;
                            default :
                                return super.onTouchEvent(event);
                        }
                    }
                    
                    //exemple sur une sous-classe de View
                    View myView = findViewById(R.id.my_view);
                    myView.setOnTouchListener(new OnTouchListener() {
                        public boolean onTouch(View v, MotionEvent event) {
                            //action to do
                            return true;
                        }
                    });
                    
                ]]></code>
        </pre>
      </article>
      <article>
        <h4>Position du ou des doigts</h4>
        <p>Dans le cas o√π on a 1 doigt, getX et getY nous renvoie la position du doigt sur l'√©cran.</p>
        <pre>
          <code class="java"><![CDATA[
                    @Override
                    public boolean onTouchEvent(MotionEvent event) {
                        float xPosition = 0;
                        float yPosition = 0;
                        if(event.getActionMasked() == MotionEvent.ACTION_DOWN){
                            xPosition = event.getX();
                            yPosition = event.getY();
                        }
                        if(event.getActionMasked() == MotionEvent.ACTION_MOVE){
                            xPosition = event.getX();
                            yPosition = event.getY();
                        }
                        return super.onTouchEvent(event);
                    }
                ]]></code>
        </pre>
        <p>Dans le cas o√π il y a plusieurs doigts le syst√®me g√©n√®rent ces touchEvent</p>
        <p>la m√©thode getX ou getY peut prendre en param√®tre l'index du pointeur dont on veut la position</p>
        <ul>
          <li>ACTION_DOWN : Pour le premier pointeur qui touche l'√©cran. Toujours √† l'index 0 dans le MotionEvent.
            </li>
          <li>ACTION_POINTER_DOWN : Pour les pointeurs suppl√©mentaires qui entrent dans l'√©cran apr√®s le premier.
                L'index du pointeur peut √™tre obtenu en utilisant getActionIndex().
            </li>
          <li>ACTION_MOVE : Une modification s'est produite dans un geste vers un (un ou plusieurs) pointeur(s).</li>
          <li>ACTION_POINTER_UP : Lorsqu'un pointeur autre que le dernier est enlev√©. L'index du pointeur qui vient de
                sortir peut √™tre obtenu en utilisant getActionIndex().
            </li>
          <li>ACTION_UP : Envoy√© lorsque le dernier pointeur quitte l'√©cran. Index 0</li>
        </ul>
        <pre>
          <code class="java"><![CDATA[
                    @Override
                    public boolean onTouchEvent(MotionEvent event) {
                        // get pointer index from the event object
                        int pointerIndex = event.getActionIndex();
                        // get pointer ID from pointerIndex
                        int pointerId = event.getPointerId(pointerIndex);
                        // get action
                        int maskedAction = event.getActionMasked();
                        switch (maskedAction) {
                            case MotionEvent.ACTION_DOWN:
                                Log.d(TAG, "index down: " + pointerId);
                                break;
                            case MotionEvent.ACTION_POINTER_DOWN: {
                                Log.d(TAG, "index down: " + pointerId);
                                break;
                            }
                            case MotionEvent.ACTION_MOVE: { // a pointer was moved
                                Log.d(TAG, "index move: " + pointerId);
                                break;
                            }
                            case MotionEvent.ACTION_UP:
                                Log.d(TAG, "index up: " + pointerId);
                
                                break;
                            case MotionEvent.ACTION_POINTER_UP:
                                Log.d(TAG, "index up: " + pointerId);
                                break;
                        }
                
                        return true;
                    }
                ]]></code>
        </pre>
      </article>
      <article>
        <h2>Gesture Detector</h2>
        <p>Pour aider sur les manipulations de l'onTouch, il y a dans le SDK une interface pour d√©tecter certain type de
            mouvement. C'est le GestureDetector
        </p>
      </article>
      <article>
        <h3>Implementer l'interface</h3>
        <pre>
          <code class="java"><![CDATA[
                            public class EventActivity extends AppCompatActivity implements GestureDetector.OnGestureListener {
                                Context context;
                                @Override
                                protected void onCreate(Bundle savedInstanceState) {
                                    super.onCreate(savedInstanceState);
                                    context = this;
                                    setContentView(R.layout.activity_event);
                                }
                                @Override
                                public boolean onDown(MotionEvent e) {
                                    return false;
                                }
                                @Override
                                public void onShowPress(MotionEvent e) {
                                }
                                @Override
                                public boolean onSingleTapUp(MotionEvent e) {
                                    return false;
                                }
                                @Override
                                public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
                                    return false;
                                }
                                @Override
                                public void onLongPress(MotionEvent e) {
                                }
                                @Override
                                public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
                                    return false;
                                }
                            }
                        ]]></code>
        </pre>
      </article>
      <article>
        <h3>Ajouter Gesture Detector</h3>
        <pre>
          <code class="java"><![CDATA[
                    public class EventActivity extends AppCompatActivity implements GestureDetector.OnGestureListener {
                        private String TAG = "debug-app";
                        GestureDetector gestureDetector;
                        Context context;
                        @Override
                        protected void onCreate(Bundle savedInstanceState) {
                            super.onCreate(savedInstanceState);
                            context = this;
                            setContentView(R.layout.activity_event);
                            gestureDetector = new GestureDetector(this,this);
                        }
                        @Override
                        public boolean onDown(MotionEvent e) {
                            return false;
                        }
                        @Override
                        public void onShowPress(MotionEvent e) {
                        }
                        @Override
                        public boolean onSingleTapUp(MotionEvent e) {
                            return false;
                        }
                        @Override
                        public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
                            return false;
                        }
                        @Override
                        public void onLongPress(MotionEvent e) {
                        }
                        @Override
                        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
                            return false;
                        }
                    }
                ]]></code>
        </pre>
      </article>
      <article>
        <h3>Lier GestureDetector au onTouchEvent</h3>
        <pre>
          <code class="java"><![CDATA[
                    public class EventActivity extends AppCompatActivity implements GestureDetector.OnGestureListener {
                        private String TAG = "debug-app";
                        GestureDetector gestureDetector;
                        Context context;
                        @Override
                        protected void onCreate(Bundle savedInstanceState) {
                            super.onCreate(savedInstanceState);
                            context = this;
                            setContentView(R.layout.activity_event);
                            gestureDetector = new GestureDetector(this,this);
                        }
                        @Override
                        public boolean onTouchEvent(MotionEvent event) {
                            gestureDetector.onTouchEvent(event);
                            return true;
                        }
                        @Override
                        public boolean onDown(MotionEvent e) {
                            return false;
                        }
                        @Override
                        public void onShowPress(MotionEvent e) {
                        }
                        @Override
                        public boolean onSingleTapUp(MotionEvent e) {
                            return false;
                        }
                        @Override
                        public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
                            return false;
                        }
                        @Override
                        public void onLongPress(MotionEvent e) {
                        }
                        @Override
                        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
                            return false;
                        }
                    }
                ]]></code>
        </pre>
      </article>
    </section>
    <section>
      <h1>Les vues personnalis√©es</h1>
      <!--TODO custom view-->
    </section>
    <section>
      <h1>Sauvegarde des informations</h1>
      <ul>
        <li>SharedPreferences</li>
        <li>file stream</li>
        <li>Base de donn√©e SQLITE</li>
      </ul>
      <article>
        <h2>SharedPreferences</h2>
        <a href="https://developer.android.com/training/data-storage/shared-preferences">DOC</a>
        <p>Permet d'enregistrer des informations de petites taille dans une collection sous format clef/valeur:</p>
        <p>Ces informations sont accessibles par n'importe quelle activit√© de l'application</p>
        <p>Les donn√©es persistent malgr√© un red√©marrage ou une mise √† jour de l'application</p>
      </article>
      <article>
        <h3>Acc√©der aux SharedPreferences</h3>
        <pre>
          <code class="java"><![CDATA[
                //si pas besoin de cat√©goriser les informations
                SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);
                //si besoin de cat√©goriser
                SharedPreferences sharedPreferencesUser = context.getSharedPreferences("user", Context.MODE_PRIVATE);
            ]]></code>
        </pre>
        <p>remarque: on utilise MODE_PRIVATE, mais il n'existe plus d'autre mode que celui-ci. Avant on avait
            MODE_WORLD_WRITEABLE ou MODE_WORLD_READABLE, mais c'est d√©pr√©ci√© et si on essaie d'acc√©der au
            SharedPreferences depuis une autre application, cela d√©clenche une exception de s√©curit√©
        </p>
      </article>
      <article>
        <h3>Acc√©der aux donn√©es</h3>
        <p>Depuis l'objet SharedPreferences utiliser les m√©thodes sharedPreferences.getXXX("key", defautValue) ou XX
            correspond √† un type primitif et "key" la clef utilis√©e pour sauvegarder la donn√©e.
        </p>
        <pre>
          <code class="java"><![CDATA[
                SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);
                String guid = sharedPreferences.getString("id",null);
                int age = sharedPreferences.getInt("age",-1);
            ]]></code>
        </pre>
      </article>
      <article>
        <h3>Ajouter des donn√©es</h3>
        <p>Pour ajouter des donn√©es de type primitif il faut passer par l'objet SharedPreferences.Editor</p>
        <p>
          Une fois ajout√© il faut utiliser 
          <kbd>commit</kbd>
           ou 
          <kbd>apply</kbd>
           pour synchroniser les infos sur le
            disque.
        
        </p>
        <pre>
          <code class="java"><![CDATA[
                SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);
                SharedPreferences.Editor editor = sharedPreferences.edit();
                editor.putString("userName", "John Doe");
                editor.putFloat("xPosition", 42.56f);
                editor.putFloat("yPosition", 1056.89f);
                editor.apply();
            ]]></code>
        </pre>
        <p>apply() modifie imm√©diatement l'objet SharedPreferences en m√©moire, mais √©crit les mises √† jour sur le disque
            de mani√®re asynchrone. Vous pouvez √©galement utiliser commit() pour √©crire les donn√©es sur le disque de
            fa√ßon synchrone. Cependant, comme commit() est synchrone, √©vitez de l'appeler √† partir de votre thread
            principal, car cela pourrait suspendre le rendu de l'interface utilisateur.
        </p>
      </article>
      <article>
        <h3>Supprimer des donn√©es</h3>
        <p>On peut soit supprimer toutes les donn√©es, soit seulement une donn√©e par clef.</p>
        <p>Doit aussi appeler apply ou commit pour synchroniser les modifications</p>
        <pre>
          <code class="java"><![CDATA[
                SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);
                SharedPreferences.Editor editor = sharedPreferences.edit();
               
                //suppression par clef
                editor.remove("userName");
                editor.remove("id");
                editor.apply();
               
                //suppression total
                editor.clear();
                editor.apply();
            ]]></code>
        </pre>
      </article>
      <article>
        <h2>Persistance dans un fichier</h2>
        <p>M√™me proc√©d√© que vue dans le cours de Java I pour manipuler les streams, seul nuance il existe une memoir
            interne ou une memoire externe
        </p>
      </article>
      <article>
        <h3>√âcrire/Lire en interne</h3>
        <a href="https://developer.android.com/training/data-storage/app-specific#internal">DOC</a>
        <p>Le mode d'acc√®s est forc√©ment priv√©e</p>
        <p>context.getFilesDir(): Renvoie le chemin absolu du r√©pertoire sur le syst√®me de fichiers o√π les fichiers
            cr√©√©s avec openFileOutput(String, int) sont stock√©s.
        </p>
        <p>Aucune autorisation suppl√©mentaire n'est requise pour que l'application appelante puisse lire ou √©crire des
            fichiers sous le chemin renvoy√©.
        </p>
        <pre>
          <code class="java"><![CDATA[
            File file = new File(context.getFilesDir(), filename);
            ]]></code>
        </pre>
        <p>Ecrire dans un fichier</p>
        <pre>
          <code class="java"><![CDATA[
                String filename = "myFile.txt";
                String fileContents = "Hello world!";
                try (FileOutputStream fos = context.openFileOutput(filename, Context.MODE_PRIVATE)) {
                    fos.write(fileContents.toByteArray());
                }
            ]]></code>
        </pre>
        <p>Lire dans un fichier</p>
        <pre>
          <code class="java"><![CDATA[
                FileInputStream fileInputStream = context.openFileInput(fileName);
                InputStreamReader inputStreamReader =
                        new InputStreamReader(fileInputStream, StandardCharsets.UTF_8);
                StringBuilder stringBuilder = new StringBuilder();
                try (BufferedReader reader = new BufferedReader(inputStreamReader)) {
                    String line = reader.readLine();
                    while (line != null) {
                        stringBuilder.append(line).append('\n');
                        line = reader.readLine();
                    }
                } catch (IOException e) {
                    // Error occurred when opening raw file for reading.
                } finally {
                    String contents = stringBuilder.toString();
                }
            ]]></code>
        </pre>
      </article>
      <article>
        <h3>Lire/√©crire dans la m√©moire externe</h3>
        <p>Premi√®rement on doit d√©clarer une permission dans le manifest</p>
        <pre>
          <code class="xml"><![CDATA[
                <uses-permission android:name="android.permission.MANAGE_EXTERNAL_STORAGE" />
            ]]></code>
        </pre>
        <p>Pour tester D√©brancher le cable, car sinon la m√©moire externe sera "monter" sur le pc</p>
        <p>Aucune certitude que les donn√©es soient pr√©sentes, car elles sont publiques et modifiables par toutes les
            autres applications.
        </p>
        <p>Les repertoires pour stocker des informations suivent un standard pour toutes ses photos, ses musiques et
            fichiers audio.
        </p>
        <pre>
          <code class="java"><![CDATA[
                    File file = new File(Environment.getExternalStorageDirectory().getPath()+ File.separator+ "Android/data"+File.separator + getPackageName() + "/files/"+"myFile.txt" );
                ]]></code>
        </pre>
        <p>Sinon m√™me chose que memoire interne pour manipulation des fichiers.</p>
      </article>
      <article>
        <h2>Base de donn√©e - BD</h2>
        <p>BD locale, accessible que par l'application (priv√©e) et m√™me que par le t√©l√©phone</p>
        <p>
          Le syst√®me de gestion de base de donn√©e est 
          <a href="https://www.sqlite.org/index.html">SQLite</a>
          .
        
        </p>
        <p>
          Android conseil d'utiliser leur framework 
          <a href="https://developer.android.com/training/data-storage/room">
            Room
        </a>
           pour acc√©der aux bases de donn√©es. Dans ce cours, on va utiliser l'API SQLite que Room utilise.
        
        </p>
      </article>
      <article>
        <h3>Cr√©ation d'une table SQLite</h3>
        <p>
          Dans SQLite il existe que 5
            
          <a href="https://www.sqlite.org/datatype3.html">types</a>
        </p>
        <ul>
          <li>NULL</li>
          <li>INTEGER</li>
          <li>REAL</li>
          <li>TEXT</li>
          <li>BLOB (Binary Barge OBject)</li>
        </ul>
        <p>On peut aussi ajouter des contraintes</p>
        <li>PRIMARY KEY</li>
        <li>NOT NULL</li>
        <li>CHECK</li>
        <li>DEFAULT</li>
        <li>CONSTRAINT KEY</li>
        <p>ex: cr√©ation d'une table d'√©tudiant</p>
        <pre>
          <code class="sql"><![CDATA[
                CREATE TABLE etudiant (
                    id INTEGER PRIMARY KEY AUTOINCREMENT,
                    first_name TEXT,
                    last_name TEXT,
                    age
                );
            ]]></code>
        </pre>
      </article>
      <article>
        <h3>Classe pour g√©rer la BD</h3>
        <p>Pour mettre la main sur la BD on doit passer par une classe qui h√©rite de SqliteOpenHelper</p>
        <pre>
          <code class="java"><![CDATA[
                public class DataBaseHelper extends SQLiteOpenHelper {
                    public DataBaseHelper(@Nullable Context context, @Nullable String name, @Nullable SQLiteDatabase.CursorFactory factory, int version) {
                        super(context, name, factory, version);
                    }
                    @Override
                    public void onCreate(SQLiteDatabase db) {
                    }
                    @Override
                    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
                    }
                }
            ]]></code>
        </pre>
        <p>Lorsqu on cr√©e une instance de cette classe, on peut ensuite mettre la main sur la BD avec
            getWritableDatabase ou get ReadableDatabase().
        </p>
        <p>D√©taillons le constructeur :</p>
        <ul>
          <li>context : le context de l'activit√©</li>
          <li>name : le nom du fichier de base de donn√©e</li>
          <li>factory : ici on mettra null. C'est dans le cas o√π on voudrait passer par les Contents Provider</li>
          <li>version : la version de la bd. Tr√®s important, car ce param√®tre va avoir une influence sur l'appel des
                m√©thodes onCreate ou onUpgrade
            </li>
        </ul>
        <p>onCreate : appel√© la premiere fois que l'on essaie d'acc√©der √† la BD ou quand la version = 1</p>
        <p>onUpgrade : si on change le num√©ro de la version cette m√©thode est alors appel√©e. On est libre de changer la
            structure des tables ou tous autres actions SQL
        </p>
        <pre>
          <code class="java"><![CDATA[
                @Override
                public void onCreate(SQLiteDatabase db) {
                    db.execSQL("CREATE TABLE etudiant (\n" +
                            "id INTEGER PRIMARY KEY AUTOINCREMENT," +
                            "first_name TEXT," +
                            "last_name TEXT," +
                            "age" +
                            ");");
                    db.execSQL("INSERT INTO etudiant ('first_name','last_name','age') values ('john','doe', 27), ('foo','bar',99);");
                }
                @Override
                public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
                    db.execSQL("DROP TABLE IF EXISTS etudiant");
                    onCreate(db);
                }
            ]]></code>
        </pre>
      </article>
      <article>
        <h3>Manager BdHelper</h3>
        <p>Pour g√©rer les versions et mettre plus facilement la main sur la base de donn√©e on pourrait cr√©er une classe
            ConnectionDB
        </p>
        <pre>
          <code class="java"><![CDATA[
                public class ConnectionDB {
                    private static int version = 1;
                    private static String bnName = "myBd.db";
                    private static SQLiteDatabase bd = null;
                    private static DataBaseHelper helper;
                    
                    public static SQLiteDatabase getBd(Context context){
                        if(helper == null){
                            helper = new DataBaseHelper(context, bnName, null, version);
                        }
                        bd = helper.getWritableDatabase();
                        return bd;
                    }
                    public static void close(){
                        if(bd!= null &&  !bd.isOpen()){
                            bd.close();
                        }
                    }
                }
            ]]></code>
        </pre>
      </article>
      <article>
        <h3>G√©rer les donn√©es de la bd</h3>
        <p>On va utiliser la base de donn√©e comme en JavaII avec un Manager pour chaque table.</p>
        <p>Ici on va faire un EtudiantManager</p>
      </article>
      <article>
        <h4>Ajouter</h4>
        <pre>
          <code class="java"><![CDATA[
                    public class EtudiantManager {
                    
                        public static long add(Context context, Etudiant etudiantToAdd){
                            ContentValues contentValues = new ContentValues();
                            contentValues.put("first_name", etudiantToAdd.getFirstName());
                            contentValues.put("last_name", etudiantToAdd.getLastName());
                            contentValues.put("age", etudiantToAdd.getAge());
                            SQLiteDatabase bd = ConnectionDB.getBd(context); //on r√©utilise ConnctionDB ici
                            return bd.insert("etudiant", null, contentValues);
                        }
                    }
                ]]></code>
        </pre>
        <p>On utilise un objet ContentValues clef/valeur pour ajouter les donn√©es. Les clefs doivent √™tre les m√™mes que
            les colonnes de la table.
        </p>
        <p>la methode insert retourne l'id autog√©n√©r√©.</p>
      </article>
      <article>
        <h4>Supprimer</h4>
        <pre>
          <code class="java"><![CDATA[
                public static void delete(Context context, int idEtudiant){
                    SQLiteDatabase bd = ConnectionDB.getBd(context);
                    bd.delete("etudiant","id = ?" , new String[]{String.valueOf(idEtudiant)});
                }
            ]]></code>
        </pre>
        <p>d√©taillons les param√®tres de la m√©thode delete</p>
        <pre>
          <code class="java"><![CDATA[
                public int delete (String table,
                                    String whereClause,
                                    String[] whereArgs)
            ]]></code>
        </pre>
        <ul>
          <li>table : le nom de la table</li>
          <li>whereClause : condition de suppression</li>
          <li>whereArgs : valeur pour condition de suppression</li>
        </ul>
        <p>Si on avait √©crit la requ√™te SQL pour supprimer un √©tudiant, on aurait √©crit :</p>
        <pre>
          <code class="sql"><![CDATA[
                DELETE FROM etudiant WHERE id = ?
            ]]></code>
        </pre>
        <p>WHERE id = ? : est la condition de suppression ou le whereClause on appelle le ? un joker. Il sera remplacer
            par la valeur voulue.
        </p>
        <p>Si on avait voulu supprimer l'√©tudiant avec l'id = 7 on aurait eu :</p>
        <pre>
          <code class="sql"><![CDATA[
                DELETE FROM etudiant WHERE id = 7
            ]]></code>
        </pre>
        <p>7 est le whereArgs ou l'argument du where, soit la condition changeante.</p>
        <p>On aurait pu avoir</p>
        <pre>
          <code class="sql"><![CDATA[
                    DELETE FROM etudiant WHERE id = ? AND name LIKE ?
                ]]></code>
        </pre>
        <p>Ici on a 2 conditions dans le where clause. C'est pour cela que le whereArgs est un tableau de String. La
            premiere valeur va correspondre au premier ? et la deuxi√®me valeur au deuxi√®me ?
        </p>
      </article>
      <article>
        <h4>Modifier</h4>
        <pre>
          <code class="java"><![CDATA[
                    public static void update(Context context, Etudiant etudiantToUpdate) {
                        ContentValues contentValues = new ContentValues();
                        contentValues.put("first_name", etudiantToUpdate.getFirstName());
                        contentValues.put("age", etudiantToUpdate.getAge());
                        SQLiteDatabase bd = ConnectionDB.getBd(context);
                        long nbRowChange = bd.update("etudiant", contentValues, "id = ?", new String[]{String.valueOf(etudiantToUpdate.getId())});
                    }
                ]]></code>
        </pre>
        <p>On va r√©utiliser le m√™me principe que le whereClaus et le whereArgs.</p>
        <p>Seul les valeurs ajout√©es dans le ContentValues seront modifi√©es.</p>
        <p>comme pr√©c√©demment on doit avoir les m√™mes clefs que les noms des colones</p>
      </article>
      <article>
        <h4>S√©lectionner des donn√©es</h4>
        <pre>
          <code class="java"><![CDATA[
                    public static ArrayList<Etudiant> getAll(Context context) {
                        SQLiteDatabase bd = ConnectionDB.getBd(context);
                        String query = "SELECT * FROM etudiant";
                        ArrayList<Etudiant> etudiants = null;
                        Cursor cursor = bd.rawQuery(query, null);
                        if (cursor.isBeforeFirst()) {
                            etudiants = new ArrayList<>();
                            while (cursor.moveToNext()) {
                                Etudiant etudiant = new Etudiant();
                                etudiant.setId(cursor.getInt(cursor.getColumnIndexOrThrow("id")));
                                etudiant.setFirstName(cursor.getString(cursor.getColumnIndexOrThrow("first_name")));
                                etudiant.setLastName(cursor.getString(cursor.getColumnIndexOrThrow("last_name")));
                                etudiant.setAge(cursor.getInt(cursor.getColumnIndexOrThrow("age")));
                                etudiants.add(etudiant);
                            }
                        }
                        return etudiants;
                    }
                ]]></code>
        </pre>
        <p>L'objet Cursor est quasiment le m√™me que l'objet ResultSet du cours de JavaII. C'est une structure de donn√©e
            de type Set. On va la parcourir avec la boucle while.
        </p>
        <p>Apr√®s l'appelle de moveToNext() on a un nouvel enregistrement de la table. S'il n'y a plus d'enregistrement,
            moveToNext() renverra false
        </p>
        <p>Dans le cas d'une requ√™te avec des param√®tres, on va devoir utiliser le whereArgs.</p>
        <p>Exemple pour r√©cup√©rer les √©tudiants ayant un √¢ge sup√©rieur √† :</p>
        <pre>
          <code class="java"><![CDATA[
                public static ArrayList<Etudiant> getByAgeLimite(Context context, int ageLimite) {
                    SQLiteDatabase bd = ConnectionDB.getBd(context);
                    String query = "SELECT * FROM etudiant where age > ?";
                    ArrayList<Etudiant> etudiants = null;
                    Cursor cursor = bd.rawQuery(query, new String[]{String.valueOf(ageLimite)});
                    if (cursor.isBeforeFirst()) {
                        etudiants = new ArrayList<>();
                        while (cursor.moveToNext()) {
                            Etudiant etudiant = new Etudiant();
                            etudiant.setId(cursor.getInt(cursor.getColumnIndexOrThrow("id")));
                            etudiant.setFirstName(cursor.getString(cursor.getColumnIndexOrThrow("first_name")));
                            etudiant.setLastName(cursor.getString(cursor.getColumnIndexOrThrow("last_name")));
                            etudiant.setAge(cursor.getInt(cursor.getColumnIndexOrThrow("age")));
                            etudiants.add(etudiant);
                        }
                    }
                    return etudiants;
                }
                ]]></code>
        </pre>
      </article>
    </section>
    <section>
      <h1>Le ListView</h1>
      <!--TODO listView-->
    </section>
    <section>
      <h1>Les Sensors</h1>
      <p>La plupart des appareils fonctionnant sous Android ont des capteurs int√©gr√©s qui mesurent le mouvement,
        l'orientation et diverses conditions environnementales. Une application m√©t√©orologique peut utiliser le capteur
        de temp√©rature et le capteur d'humidit√© d'un appareil pour calculer et signaler le point de ros√©e. Un jeu
        pourrait utiliser l'acc√©l√©rom√®tre pour d√©placer une image avec le mouvement du t√©l√©phone.
    </p>
      <p>
        <a href="https://developer.android.com/guide/topics/sensors">DOC</a>
      </p>
      <article>
        <h2>Les Types Sensor</h2>
        <p>il existe 3 cat√©gories de Sensor dans les appareils :</p>
        <ul>
          <li>Sensors de mouvement</li>
          <li>Sensors d'environnement</li>
          <li>Sensors de position</li>
        </ul>
      </article>
      <article>
        <h3>Mouvement</h3>
        <p>
          <a href="https://developer.android.com/guide/topics/sensors/sensors_motion">DOC</a>
          
            Les capteurs de gravit√©, d'acc√©l√©ration lin√©aire, de vecteur de rotation, de mouvement significatif, de
            compteur de pas et de d√©tecteur de pas sont soit mat√©riels, soit logiciels.
            Les capteurs de l'acc√©l√©rom√®tre et du gyroscope sont toujours bas√©s sur le mat√©riel (hardware).
        
        </p>
      </article>
      <article>
        <h3>Position</h3>
        <p>
          <a href="https://developer.android.com/guide/topics/sensors/sensors_position">DOC</a>
          
            La plate-forme Android propose deux capteurs permettant de d√©terminer la position d'un appareil : le capteur
            de champ g√©omagn√©tique et l'acc√©l√©rom√®tre.
        
        </p>
      </article>
      <article>
        <h3>Environnement</h3>
        <p>
          <a href="https://developer.android.com/guide/topics/sensors/sensors_environment">DOC</a>
          
            La plate-forme Android fournit quatre capteurs qui vous permettent de surveiller diverses propri√©t√©s
            environnementales. Vous pouvez utiliser ces capteurs pour surveiller l'humidit√© ambiante relative,
            l'√©clairement, la pression ambiante et la temp√©rature ambiante √† proximit√© d'un appareil Android.
        
        </p>
        <p>Les quatre capteurs d'environnement sont bas√©s sur le mat√©riel et ne sont disponibles que si le fabricant de
            l'appareil les a int√©gr√©s √† un appareil.
        </p>
      </article>
      <article>
        <h2>Sensor Framework</h2>
        <p>Pour r√©cup√©rer les donn√©es des sensors, ce sera toujours de la m√™me fa√ßon √† travers le Framework Sensor.</p>
        <p>On utilisera 4 classes/interfaces</p>
        <ul>
          <li>SensorManager : permet d'aider √† g√©rer les Sensors, mettre la main dessus, enregistrer un listener,
                avoir la liste de tous les sensors.
            </li>
          <li>Sensor : r√©cup√©r√© depuis SensorManager, permet d'avoir des informations sur un sensor en particulier.
            </li>
          <li>SensorEvent : √©v√©nement que l'on va r√©cup√©rer dans le callBack pour la ou les valeurs du sensor.</li>
          <li>SensorEventListener : √©v√©nement que l'on enregistrera dans le sensorManager pour √©couter le sensor</li>
        </ul>
      </article>
      <article>
        <h3>SensorManager</h3>
        <pre>
          <code class="java"><![CDATA[
                    SensorManager sensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
                ]]></code>
        </pre>
        <p>Depuis SensorManager on peut lister les sensors pr√©sent dans le t√©l√©phone.</p>
        <pre>
          <code class="java"><![CDATA[
                    List<Sensor> sensors = sensorManager.getSensorList(Sensor.TYPE_ALL);
                    for (Sensor sensor : sensors) {
                        Log.d("debug_app", "sensor: " + sensor.getName());
                        Log.d("debug_app", "sensor: " + sensor.getMinDelay());
                        Log.d("debug_app", "sensor: " + sensor.getVersion());
                        Log.d("debug_app", "sensor: " + sensor.getMaximumRange());
                    }
                ]]></code>
        </pre>
      </article>
      <article>
        <h3>Sensor</h3>
        <p>La premi√®re chose s'est de v√©rifier si le sensor que l'on veut utiliser existe. Pour cela on va essayer de le
            r√©cup√©rer depuis le sensorManager. On fait g√©n√©ralement cela dans onCreate.
        </p>
        <pre>
          <code class="java"><![CDATA[
                    Sensor sensorLight = sensorManager.getDefaultSensor(Sensor.TYPE_LIGHT);
                    if(sensorLight != null){
                        // sensor existe
                    } else {
                        // pr√©venir l'utilisateur qu'on ne peut pas continuer
                    }
                ]]></code>
        </pre>
        <p>
          Pour connaitre la constante 
          <kbd>Sensor.TYPE_LIGHT</kbd>
           qui correspond au sensor que l'on veut, il faut
            aller
            voir dans la 
          <a href="https://developer.android.com/guide/topics/sensors/sensors_overview">DOC</a>
          .
        
        </p>
        <img class="img-fluid rounded" src="../asset/sensor_type_doc.png" alt=""/>
        <p>M√©thodes utiles :</p>
        <ul>
          <li>getResolution()</li>
          <li>getMaximumRange()</li>
          <li>getPower()</li>
        </ul>
      </article>
      <article>
        <h3>Listener</h3>
        <p>Pour lire les donn√©es provenant des Sensor il faut implementer deux m√©thodes de l'interface
            SensorEventListener. Elles sont appel√©es par le syst√®me.
        </p>
        <ul>
          <li>onAccuracyChanged() : lorsque la pr√©cision du sensor change (SENSOR_STATUS_ACCURACY_LOW,
                SENSOR_STATUS_ACCURACY_MEDIUM, SENSOR_STATUS_ACCURACY_HIGH, or SENSOR_STATUS_UNRELIABLE)
            </li>
          <li>onSensorChanged() : √† chaque fois que les donn√©es du sensor changent. On va les retrouver dans
                SensorEvent
            </li>
        </ul>
        <pre>
          <code class="java"><![CDATA[
                SensorEventListener sensorEventListener = new SensorEventListener() {
                    @Override
                    public void onSensorChanged(SensorEvent event) {
                    }
                    @Override
                    public void onAccuracyChanged(Sensor sensor, int accuracy) {
                    }
                };
                ]]></code>
        </pre>
        <p>On aurait aussi pu utiliser implement dans l'activit√© ou la class qui nous arrange</p>
        <p>Pour enregistrer le listener on le fait dans onResume sur l'objet sensorManager et va pr√©ciser le d√©lai
            d'√©coute du sensor.
        </p>
        <ul>
          <li>SENSOR_DELAY_GAME (20,000 microsecondes d√©lai)</li>
          <li>SENSOR_DELAY_UI (60,000 microsecondes d√©lai)</li>
          <li>SENSOR_DELAY_FASTEST (0 microseconde d√©lai)</li>
          <li>Depuis Android 3.0 sp√©cifier la valeur en microseconde</li>
        </ul>
        <p>On fait √ßa dans onResume, car si on quitte l'activit√© et qu'on revient dessus onResume est appel√© dans tous
            les cas.
        </p>
        <pre>
          <code class="java"><![CDATA[
                    @Override
                    protected void onResume() {
                        super.onResume();
                        sensorManager.registerListener(sensorEventListener, sensorLight, SensorManager.SENSOR_DELAY_FASTEST);
                    }
                ]]></code>
        </pre>
        <p>Lorsque l'on quitte l'activit√© et qu'elle passe en pause, il faut arr√™ter d'√©couter le sensor. √âcouter les
            sensors est une √©tape qui consomme beaucoup de batterie. Donc, il est important quand on quitte l'activit√©
            d'arr√™ter d'√©couter le sensor.
        </p>
        <pre>
          <code class="java"><![CDATA[
                    @Override
                    protected void onPause() {
                        super.onPause();
                        sensorManager.unregisterListener(sensorEventListener,sensorLight);
                    }
                ]]></code>
        </pre>
      </article>
      <article>
        <h3>Traiter les valeurs</h3>
        <p>
          Tout va se passer dans onSensorChanged(SensorEvent event), les donn√©es vont √™tre ajout√©es dans l'objet
            SensorEvent. Plus pr√©cis√©ment dans 
          <kbd>event.values</kbd>
          .
        
        </p>
        <p>values est un tableau de float qui va contenir la ou les valeurs du sensor.</p>
        <p>
          Il faut maintenant savoir combien de donn√©e on a pour le sensor. Ici encore c'est la 
          <a href="https://developer.android.com/guide/topics/sensors/sensors_environment">DOC
        </a>
           qui va nous donner l'information.
        
        </p>
        <img class="img-fluid rounded" src="../asset/sensor_value_doc.png" alt=""/>
        <p>Dans notre cas il n'y a qu'une seule valeur, mais si on regarde le magn√©tom√®tre, c'est diff√©rent.</p>
        <img class="img-fluid rounded" src="../asset/sensor_value_doc2.png" alt="" data-title="" data-subtitle=""/>
        <p>Si on veut afficher la valeur du luxm√®tre (mesure de la lumi√®re) en lux (unit√© de mesure de la lumi√®re) dans
            un TextView, voici le code
        </p>
        <pre>
          <code class="java"><![CDATA[
                    public class SensorActivity extends AppCompatActivity {
                        TextView textView;
                        SensorManager sensorManager;
                        SensorEventListener sensorEventListener;
                        Sensor sensorLight;
                        @Override
                        protected void onCreate(Bundle savedInstanceState) {
                            super.onCreate(savedInstanceState);
                            setContentView(R.layout.activity_sensor);
                            textView = findViewById(R.id.text);
                            sensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
                            sensorLight = sensorManager.getDefaultSensor(Sensor.TYPE_LIGHT);
                            sensorEventListener = new SensorEventListener() {
                                @Override
                                public void onSensorChanged(SensorEvent event) {
                                    float luxValue = event.values[0];
                                    textView.setText(String.valueOf(luxValue) + " lux");
                                }
                                @Override
                                public void onAccuracyChanged(Sensor sensor, int accuracy) {
                                }
                            };
                        }
                        @Override
                        protected void onResume() {
                            super.onResume();
                            sensorManager.registerListener(sensorEventListener, sensorLight, SensorManager.SENSOR_DELAY_FASTEST);
                        }
                        @Override
                        protected void onPause() {
                            super.onPause();
                            sensorManager.unregisterListener(sensorEventListener,sensorLight);
                        }
                    }
                ]]></code>
        </pre>
        <p>
          L'avantage ici, c'est qu'il y a qu'une fa√ßon d'acc√©der √† tous les sensors. Seul le nombre de valeurs dans le
            tableau 
          <kbd>event.values</kbd>
           va changer.
        
        </p>
      </article>
      <article>
        <h3>permissions</h3>
        <p>
          Si vous publiez votre application sur Google Play, vous pouvez utiliser l'√©l√©ment
            
          <![CDATA[ <uses-feature> ]]>
          
            dans votre fichier manifeste pour filtrer votre application des appareils qui n'ont pas la configuration de
            capteur appropri√©e pour votre application.
        
        </p>
        <pre>
          <code class="xml"><![CDATA[
                    <uses-feature android:name="android.hardware.sensor.accelerometer"
                                  android:required="true" />
                ]]></code>
        </pre>
      </article>
    </section>
    <section>
      <h1>Utilisation de processus en arri√®re-plan</h1>
      <!--TODO thread-->
    </section>
    <section>
      <h1>Utiliser le protocole http</h1>
      <!--TODO http-->
    </section>
  </body>
</html>